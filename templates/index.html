<!DOCTYPE html>
<html lang="es" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova - Social Media AI Dashboard</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- Layout fixes for deployment -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layout-fixes.css') }}">
    <!-- Deployment specific fixes -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/deployment-fixes.css') }}">
    
    <!-- Critical inline CSS for deployment -->
    <style>
        /* Force sticky sidebar layout */
        body {
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .sidebar,
        nav.sidebar,
        .col-md-3.sidebar,
        .col-lg-2.sidebar,
        nav.col-md-3.sidebar,
        nav.col-lg-2.sidebar {
            position: sticky !important;
            top: 0 !important;
            left: 0 !important;
            width: 280px !important;
            height: 100vh !important;
            z-index: 9999 !important;
            background-color: #1a202c !important;
            border-right: 2px solid #2d3748 !important;
            box-shadow: 4px 0 12px rgba(0, 0, 0, 0.2) !important;
            overflow-y: auto !important;
            flex: none !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        /* Layout for sticky sidebar */
        .flex-container {
            display: flex !important;
            min-height: 100vh !important;
            width: 100% !important;
            gap: 0 !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .content-area {
            flex: 1 !important;
            overflow-y: auto !important;
            max-height: 100vh !important;
            padding: 0 !important;
            margin: 0 !important;
            border-left: none !important;
        }
        
        /* Force content to stick to sidebar */
        main {
            margin-left: 0 !important;
            padding-left: 30px !important;
            padding-top: 20px !important;
            padding-right: 20px !important;
            padding-bottom: 20px !important;
        }
        
        /* Force navigation elements visibility */
        .sidebar div[style*="flex: 1"] {
            visibility: visible !important;
            opacity: 1 !important;
            display: block !important;
            background: #1a202c !important;
        }
        
        .sidebar div[style*="flex: 1"] > div {
            visibility: visible !important;
            opacity: 1 !important;
            display: block !important;
            margin-bottom: 1rem !important;
            padding: 0.75rem !important;
        }
        
        .sidebar div[style*="flex: 1"] > div > a {
            visibility: visible !important;
            opacity: 1 !important;
            display: flex !important;
            color: #a0aec0 !important;
            text-decoration: none !important;
        }
        
        .sidebar div[style*="flex: 1"] > div:first-child {
            background: rgba(255, 107, 71, 0.1) !important;
            border-left: 3px solid #ff6b47 !important;
        }
        
        .sidebar div[style*="flex: 1"] > div:first-child > a {
            color: #e2e8f0 !important;
        }
        
        /* Force main content positioning */
        main,
        main.col-md-9,
        main.ms-sm-auto,
        main.col-lg-10,
        main.col-md-9.ms-sm-auto.col-lg-10 {
            margin-left: 280px !important;
            width: calc(100% - 280px) !important;
            padding: 1.5rem !important;
            min-height: 100vh !important;
            background-color: var(--bg-color) !important;
        }
        
        /* Container overrides */
        .container-fluid {
            padding: 0 !important;
            max-width: 100% !important;
        }
        
        .row {
            margin: 0 !important;
            width: 100% !important;
        }
        
        /* Sidebar internal structure */
        .sidebar .position-sticky {
            position: relative !important;
            height: 100vh !important;
            display: flex !important;
            flex-direction: column !important;
        }
        
        .sidebar .user-info {
            padding: 1rem !important;
            border-bottom: 1px solid var(--border-color) !important;
            flex-shrink: 0 !important;
        }
        
        .sidebar .nav {
            flex: 1 !important;
            padding: 0 1rem !important;
        }
        
        .sidebar .sidebar-footer {
            padding: 1rem !important;
            border-top: 1px solid var(--border-color) !important;
            margin-top: auto !important;
            flex-shrink: 0 !important;
        }
    </style>
</head>
<body class="dashboard-loading">
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="sidebar" style="position: fixed; top: 0; left: 0; width: 280px; height: 100vh; background: #1a202c; border-right: 2px solid #2d3748; z-index: 10000; display: flex; flex-direction: column;">
                <!-- Top Section -->
                <div style="padding: 1rem; flex-shrink: 0;">
                    <!-- Nova Logo and Info -->
                    <div class="user-info mb-4">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="me-3">
                                    <img src="{{ url_for('static', filename='nova-logo.png') }}" alt="Nova Logo" style="height: 40px; width: 40px; border-radius: 8px;">
                                </div>
                                <div>
                                    <h6 class="mb-0" style="color: #e2e8f0;">Nova</h6>
                                    <small class="text-muted">Admin</small>
                                </div>
                            </div>
                            <div class="dropdown">
                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-user"></i>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="{{ url_for('logout') }}">
                                        <i class="fas fa-sign-out-alt me-2"></i>Cerrar Sesi√≥n
                                    </a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation - Growing Section -->
                <div style="flex: 1; padding: 1rem; background: #1a202c; min-height: 400px;">
                    <div style="margin-bottom: 1rem; padding: 0.75rem; border-radius: 0.375rem; background: rgba(255, 107, 71, 0.1); border-left: 3px solid #ff6b47;">
                        <a href="#dashboard" data-view="dashboard" style="color: #e2e8f0; text-decoration: none; display: flex; align-items: center;">
                            <i class="fas fa-home" style="color: #ff6b47; margin-right: 0.5rem; width: 16px;"></i>
                            <span>Dashboard</span>
                        </a>
                    </div>
                    
                    <div style="margin-bottom: 1rem; padding: 0.75rem; border-radius: 0.375rem; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                        <a href="#calendario" data-view="calendario" style="color: #a0aec0; text-decoration: none; display: flex; align-items: center;">
                            <i class="fas fa-calendar" style="color: #a0aec0; margin-right: 0.5rem; width: 16px;"></i>
                            <span>Calendario</span>
                        </a>
                    </div>
                    
                    <div style="margin-bottom: 1rem; padding: 0.75rem; border-radius: 0.375rem; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                        <a href="#crear-contenido" data-view="crear-contenido" style="color: #a0aec0; text-decoration: none; display: flex; align-items: center;">
                            <i class="fas fa-plus" style="color: #a0aec0; margin-right: 0.5rem; width: 16px;"></i>
                            <span>Crear Contenido</span>
                        </a>
                    </div>
                    
                    <div style="margin-bottom: 1rem; padding: 0.75rem; border-radius: 0.375rem; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                        <a href="#adaptar-contenido" data-view="adaptar-contenido" style="color: #a0aec0; text-decoration: none; display: flex; align-items: center;">
                            <i class="fas fa-magic" style="color: #a0aec0; margin-right: 0.5rem; width: 16px;"></i>
                            <span>Adaptar Contenido</span>
                        </a>
                    </div>
                    
                    <div style="margin-bottom: 1rem; padding: 0.75rem; border-radius: 0.375rem; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                        <a href="#monitoreo" data-view="monitoreo" style="color: #a0aec0; text-decoration: none; display: flex; align-items: center;">
                            <i class="fas fa-eye" style="color: #a0aec0; margin-right: 0.5rem; width: 16px;"></i>
                            <span>Monitoreo de Redes</span>
                        </a>
                    </div>
                    
                    <div style="margin-bottom: 1rem; padding: 0.75rem; border-radius: 0.375rem; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                        <a href="#validacion" data-view="validacion" style="color: #a0aec0; text-decoration: none; display: flex; align-items: center;">
                            <i class="fas fa-check-circle" style="color: #a0aec0; margin-right: 0.5rem; width: 16px;"></i>
                            <span>Validaci√≥n</span>
                        </a>
                    </div>
                    
                    <div style="margin-bottom: 1rem; padding: 0.75rem; border-radius: 0.375rem; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                        <a href="#analiticas" data-view="analiticas" style="color: #a0aec0; text-decoration: none; display: flex; align-items: center;">
                            <i class="fas fa-chart-bar" style="color: #a0aec0; margin-right: 0.5rem; width: 16px;"></i>
                            <span>Anal√≠ticas</span>
                        </a>
                    </div>
                    
                    <div style="margin-bottom: 1rem; padding: 0.75rem; border-radius: 0.375rem; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                        <a href="#configuracion" data-view="configuracion" style="color: #a0aec0; text-decoration: none; display: flex; align-items: center;">
                            <i class="fas fa-cog" style="color: #a0aec0; margin-right: 0.5rem; width: 16px;"></i>
                            <span>Configuraci√≥n</span>
                        </a>
                    </div>
                </div>

                <!-- Theme Toggle - Bottom Section -->
                <div style="padding: 1rem; border-top: 1px solid #2d3748; background: #1a202c; flex-shrink: 0;">
                    <button id="theme-toggle" class="btn btn-outline-secondary btn-sm w-100">
                        <i class="fas fa-moon me-2" id="theme-icon"></i>
                        <span id="theme-text">Modo Claro</span>
                    </button>
                </div>
            </nav>
            
            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 dashboard-entrance">
                <!-- Dashboard View -->
                <div id="dashboard-view" class="view active">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Dashboard</h1>
                    </div>
                    
                    <div class="row g-4">
                        <!-- Today's Posts Card -->
                        <div class="col-md-6">
                            <div class="card dashboard-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="card-title">Publicaciones Programadas para Hoy</h5>
                                        <i class="fas fa-calendar-day text-primary"></i>
                                    </div>
                                    <div class="metric-number" id="today-posts-count">0</div>
                                    <div id="today-posts-list" class="mt-3">
                                        <!-- Posts will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pending Approval Card -->
                        <div class="col-md-6">
                            <div class="card dashboard-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="card-title">Pendientes de Aprobaci√≥n</h5>
                                        <i class="fas fa-clock text-warning"></i>
                                    </div>
                                    <div class="metric-number" id="pending-posts-count">0</div>
                                    <button class="btn btn-outline-primary mt-3" onclick="showView('validacion')">
                                        Ir a Validaci√≥n
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Performance Chart -->
                        <div class="col-md-6">
                            <div class="card dashboard-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="card-title">Rendimiento General (√öltimos 7 d√≠as)</h5>
                                        <i class="fas fa-chart-line text-success"></i>
                                    </div>
                                    <div style="position: relative; height: 200px;">
                                        <canvas id="performanceChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick Creation -->
                        <div class="col-md-6">
                            <div class="card dashboard-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="card-title">Creaci√≥n R√°pida</h5>
                                        <i class="fas fa-plus-circle text-primary"></i>
                                    </div>
                                    <form id="quick-create-form">
                                        <div class="mb-3">
                                            <label for="quick-topic" class="form-label">Tema del post</label>
                                            <input type="text" class="form-control" id="quick-topic" placeholder="Ej: Nuevo producto, tips, noticias...">
                                        </div>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-sparkles me-2"></i>
                                            Generar Borrador
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Calendar View -->
                <div id="calendario-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Calendario</h1>
                        <div class="d-flex gap-2">
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#scheduleModal">
                                <i class="fas fa-plus me-2"></i>Programar Post
                            </button>
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-outline-primary active" data-calendar-view="month">Mes</button>
                                <button type="button" class="btn btn-outline-primary" data-calendar-view="week">Semana</button>
                                <button type="button" class="btn btn-outline-primary" data-calendar-view="day">D√≠a</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row g-3">
                        <div class="col-md-8">
                            <div class="card content-section">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0" id="calendar-title">Junio 2025</h5>
                                    <div class="btn-group btn-group-sm">
                                        <button type="button" class="btn btn-outline-secondary" id="prev-month">
                                            <i class="fas fa-chevron-left"></i>
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" id="next-month">
                                            <i class="fas fa-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div id="calendar-container">
                                        <!-- Calendar will be rendered here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Pr√≥ximas Publicaciones</h5>
                                </div>
                                <div class="card-body">
                                    <div id="upcoming-posts">
                                        <!-- Upcoming posts will be loaded here -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-3 content-section">
                                <div class="card-header">
                                    <h5 class="mb-0">Estad√≠sticas del Mes</h5>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Publicaciones programadas:</span>
                                        <span class="badge bg-primary" id="scheduled-count">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Publicaciones enviadas:</span>
                                        <span class="badge bg-success" id="sent-count">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Pendientes:</span>
                                        <span class="badge bg-warning" id="pending-count">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Create Content View -->
                <div id="crear-contenido-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Crear Contenido</h1>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card content-section">
                                <div class="card-header">
                                    <h5 class="mb-0">Formulario de Entrada</h5>
                                </div>
                                <div class="card-body">
                                    <form id="content-creation-form">
                                        <div class="mb-3">
                                            <label for="main-topic" class="form-label">Tema Principal</label>
                                            <textarea class="form-control" id="main-topic" rows="3" placeholder="Describe el tema o idea para tu contenido..."></textarea>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="tone-voice" class="form-label">Tono de Voz</label>
                                            <select class="form-select" id="tone-voice">
                                                <option value="profesional">Profesional</option>
                                                <option value="ingenioso">Ingenioso</option>
                                                <option value="inspirador">Inspirador</option>
                                                <option value="casual">Casual</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="ai-provider" class="form-label">Proveedor de IA</label>
                                            <select class="form-select" id="ai-provider">
                                                <option value="perplexity">Perplexity Sonar (Recomendado)</option>
                                                <option value="openai">OpenAI GPT-4o</option>
                                                <option value="gemini">Google Gemini 2.5 Flash</option>
                                            </select>
                                            <div class="form-text">
                                                <i class="fas fa-info-circle me-1"></i>
                                                Configura las API keys en la secci√≥n de Configuraci√≥n
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label">Plataformas</label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="linkedin" id="platform-linkedin">
                                                <label class="form-check-label" for="platform-linkedin">
                                                    <i class="fab fa-linkedin text-primary me-2"></i>LinkedIn
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="twitter" id="platform-twitter">
                                                <label class="form-check-label" for="platform-twitter">
                                                    <i class="fab fa-twitter text-info me-2"></i>Twitter
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="instagram" id="platform-instagram">
                                                <label class="form-check-label" for="platform-instagram">
                                                    <i class="fab fa-instagram text-danger me-2"></i>Instagram
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="web" id="platform-web">
                                                <label class="form-check-label" for="platform-web">
                                                    <i class="fas fa-globe text-success me-2"></i>Web
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-sparkles me-2"></i>
                                            Generar Contenido
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card content-section">
                                <div class="card-header">
                                    <h5 class="mb-0">√Årea de Resultados</h5>
                                </div>
                                <div class="card-body">
                                    <div id="generated-content">
                                        <div class="text-center text-muted py-5">
                                            <i class="fas fa-robot fa-3x mb-3"></i>
                                            <p>Completa el formulario y haz clic en "Generar Contenido" para ver los resultados</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Adapt Content View -->
                <div id="adaptar-contenido-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Adaptar Contenido</h1>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Contenido Original</h5>
                                </div>
                                <div class="card-body">
                                    <form id="content-adaptation-form">
                                        <div class="mb-3">
                                            <label for="original-content" class="form-label">Pega tu art√≠culo aqu√≠</label>
                                            <textarea class="form-control" id="original-content" rows="12" placeholder="Pega aqu√≠ el contenido que quieres adaptar para redes sociales..."></textarea>
                                            <div class="form-text">
                                                <span id="content-char-count">0</span> caracteres
                                            </div>
                                        </div>
                                        
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="adaptation-style" class="form-label">Estilo de Adaptaci√≥n</label>
                                                    <select class="form-select" id="adaptation-style">
                                                        <option value="summary">Resumen</option>
                                                        <option value="highlights">Puntos Clave</option>
                                                        <option value="questions">Preguntas Engaging</option>
                                                        <option value="story">Formato Historia</option>
                                                        <option value="tips">Tips/Consejos</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="adaptation-tone" class="form-label">Tono</label>
                                                    <select class="form-select" id="adaptation-tone">
                                                        <option value="professional">Profesional</option>
                                                        <option value="casual">Casual</option>
                                                        <option value="humorous">Humor√≠stico</option>
                                                        <option value="inspirational">Inspiracional</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label">Plataformas de Destino</label>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="twitter" id="adapt-twitter">
                                                        <label class="form-check-label" for="adapt-twitter">
                                                            <i class="fab fa-twitter me-1"></i>Twitter
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="linkedin" id="adapt-linkedin">
                                                        <label class="form-check-label" for="adapt-linkedin">
                                                            <i class="fab fa-linkedin me-1"></i>LinkedIn
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="instagram" id="adapt-instagram">
                                                        <label class="form-check-label" for="adapt-instagram">
                                                            <i class="fab fa-instagram me-1"></i>Instagram
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="facebook" id="adapt-facebook">
                                                        <label class="form-check-label" for="adapt-facebook">
                                                            <i class="fab fa-facebook me-1"></i>Facebook
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="youtube" id="adapt-youtube">
                                                        <label class="form-check-label" for="adapt-youtube">
                                                            <i class="fab fa-youtube me-1"></i>YouTube
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="web" id="adapt-web">
                                                        <label class="form-check-label" for="adapt-web">
                                                            <i class="fas fa-globe me-1"></i>Blog/Web
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="adaptation-provider" class="form-label">Proveedor de IA</label>
                                                    <select class="form-select" id="adaptation-provider">
                                                        <option value="perplexity">Perplexity (Recomendado)</option>
                                                        <option value="openai">OpenAI GPT-4o</option>
                                                        <option value="gemini">Google Gemini 2.5</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="adaptation-focus" class="form-label">Enfoque</label>
                                                    <select class="form-select" id="adaptation-focus">
                                                        <option value="engagement">M√°ximo Engagement</option>
                                                        <option value="information">Informativo</option>
                                                        <option value="viral">Potencial Viral</option>
                                                        <option value="educational">Educativo</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button type="button" class="btn btn-primary btn-lg" onclick="adaptContent()">
                                                <i class="fas fa-magic me-2"></i>Adaptar Contenido
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Contenido Adaptado</h5>
                                </div>
                                <div class="card-body">
                                    <div id="adapted-content-results">
                                        <div class="text-center text-muted py-5">
                                            <i class="fas fa-magic fa-3x mb-3"></i>
                                            <h6>Adapta tu contenido</h6>
                                            <p>Pega tu art√≠culo en el formulario de la izquierda y haz clic en "Adaptar Contenido" para generar versiones optimizadas para cada plataforma</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Validation View -->
                <div id="validacion-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Validaci√≥n</h1>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-warning">
                                    <h5 class="mb-0">Pendiente de Aprobaci√≥n</h5>
                                </div>
                                <div class="card-body">
                                    <div id="pending-approval-list">
                                        <!-- Pending posts will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-danger">
                                    <h5 class="mb-0">Rechazado</h5>
                                </div>
                                <div class="card-body">
                                    <div id="rejected-list">
                                        <div class="text-center text-muted py-4">
                                            <i class="fas fa-times-circle fa-2x mb-2"></i>
                                            <p>No hay posts rechazados</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Analytics View -->
                <div id="analiticas-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Anal√≠ticas</h1>
                    </div>
                    
                    <div class="row g-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Crecimiento de Seguidores</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="followersChart" width="400" height="200"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Tasa de Interacci√≥n por Plataforma</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="engagementChart" width="400" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Publicaciones con Mejor Rendimiento</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped analytics-table">
                                            <thead>
                                                <tr>
                                                    <th>Publicaci√≥n</th>
                                                    <th>Plataforma</th>
                                                    <th>Interacciones</th>
                                                    <th>Alcance</th>
                                                </tr>
                                            </thead>
                                            <tbody id="top-posts-table">
                                                <!-- Top posts will be loaded here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Configuration View -->
                <div id="configuracion-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Configuraci√≥n</h1>
                    </div>
                    
                    <div class="row g-4">
                        <!-- Social Media Accounts -->
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Cuentas de Redes Sociales</h5>
                                    <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addAccountModal">
                                        <i class="fas fa-plus me-1"></i>Agregar Cuenta
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div id="social-accounts-list">
                                        <!-- Social accounts will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI Content Generation Providers -->
                        <div class="col-md-8 mt-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">
                                        <i class="fas fa-robot me-2"></i>Proveedores de IA para Generaci√≥n de Contenido
                                    </h5>
                                    <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#aiProviderModal">
                                        <i class="fas fa-key me-1"></i>Configurar API Keys
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div id="ai-providers-list">
                                        <!-- AI providers will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI Prompt Configuration -->
                        <div class="col-md-12 mt-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Configuraci√≥n de Prompts de IA</h5>
                                    <button class="btn btn-outline-primary btn-sm" onclick="resetPromptsToDefault()">
                                        <i class="fas fa-undo me-1"></i>Restaurar Predeterminados
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="alert alert-info">
                                        <i class="fas fa-info-circle me-2"></i>
                                        <strong>Personaliza el comportamiento de la IA:</strong> Aqu√≠ puedes modificar los prompts que se env√≠an a los proveedores de IA para personalizar el tono, estilo y comportamiento de la generaci√≥n de contenido.
                                    </div>
                                    
                                    <ul class="nav nav-tabs mb-3" id="promptTabs" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="system-prompt-tab" data-bs-toggle="tab" data-bs-target="#system-prompt" type="button" role="tab">
                                                <i class="fas fa-cog me-1"></i>Prompt del Sistema
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="platform-prompts-tab" data-bs-toggle="tab" data-bs-target="#platform-prompts" type="button" role="tab">
                                                <i class="fas fa-share-alt me-1"></i>Prompts por Plataforma
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="tone-prompts-tab" data-bs-toggle="tab" data-bs-target="#tone-prompts" type="button" role="tab">
                                                <i class="fas fa-palette me-1"></i>Tonos de Voz
                                            </button>
                                        </li>
                                    </ul>
                                    
                                    <div class="tab-content" id="promptTabsContent">
                                        <!-- System Prompt Configuration -->
                                        <div class="tab-pane fade show active" id="system-prompt" role="tabpanel">
                                            <div class="mb-3">
                                                <label for="systemPrompt" class="form-label">Prompt del Sistema</label>
                                                <textarea class="form-control" id="systemPrompt" rows="4" placeholder="Eres un experto en marketing de redes sociales...">Eres un experto en marketing de redes sociales. Crea contenido atractivo basado en informaci√≥n actualizada.</textarea>
                                                <div class="form-text">Este prompt se env√≠a al inicio de cada conversaci√≥n con la IA para establecer su rol y comportamiento general.</div>
                                            </div>
                                            <button type="button" class="btn btn-primary" onclick="saveSystemPrompt()">
                                                <i class="fas fa-save me-1"></i>Guardar Prompt del Sistema
                                            </button>
                                        </div>
                                        
                                        <!-- Platform-specific Prompts -->
                                        <div class="tab-pane fade" id="platform-prompts" role="tabpanel">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="twitterPrompt" class="form-label">
                                                            <i class="fab fa-twitter me-1"></i>Twitter
                                                        </label>
                                                        <textarea class="form-control" id="twitterPrompt" rows="3" placeholder="Caracter√≠sticas espec√≠ficas para Twitter...">M√°ximo 280 caracteres INCLUYENDO hashtags. Tono conciso y engaging. Contenido directo, sin meta-texto ni explicaciones. No incluyas frases como "Aqu√≠ tienes" o "¬°Claro!".</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="linkedinPrompt" class="form-label">
                                                            <i class="fab fa-linkedin me-1"></i>LinkedIn
                                                        </label>
                                                        <textarea class="form-control" id="linkedinPrompt" rows="3" placeholder="Caracter√≠sticas espec√≠ficas para LinkedIn...">M√°ximo 3000 caracteres. Tono profesional. Incluir enlaces y menciones profesionales cuando sea apropiado.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="instagramPrompt" class="form-label">
                                                            <i class="fab fa-instagram me-1"></i>Instagram
                                                        </label>
                                                        <textarea class="form-control" id="instagramPrompt" rows="3" placeholder="Caracter√≠sticas espec√≠ficas para Instagram...">M√°ximo 2200 caracteres. Tono visual y atractivo. Incluir llamadas a la acci√≥n. Usar hasta 10 hashtags relevantes.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="webPrompt" class="form-label">
                                                            <i class="fas fa-globe me-1"></i>Web/Blog
                                                        </label>
                                                        <textarea class="form-control" id="webPrompt" rows="3" placeholder="Caracter√≠sticas espec√≠ficas para contenido web...">Contenido informativo y detallado. Estructura con t√≠tulos y subt√≠tulos. Incluir introducci√≥n, desarrollo y conclusi√≥n.</textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <button type="button" class="btn btn-primary" onclick="savePlatformPrompts()">
                                                <i class="fas fa-save me-1"></i>Guardar Prompts de Plataforma
                                            </button>
                                        </div>
                                        
                                        <!-- Tone Configuration -->
                                        <div class="tab-pane fade" id="tone-prompts" role="tabpanel">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="professionalTone" class="form-label">Tono Profesional</label>
                                                        <textarea class="form-control" id="professionalTone" rows="2" placeholder="Descripci√≥n del tono profesional...">Formal, informativo, con terminolog√≠a especializada cuando sea apropiado. Evitar jerga coloquial.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="casualTone" class="form-label">Tono Casual</label>
                                                        <textarea class="form-control" id="casualTone" rows="2" placeholder="Descripci√≥n del tono casual...">Conversacional, amigable, cercano. Usar lenguaje cotidiano y expresiones naturales.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="humorousTone" class="form-label">Tono Humor√≠stico</label>
                                                        <textarea class="form-control" id="humorousTone" rows="2" placeholder="Descripci√≥n del tono humor√≠stico...">Divertido, con humor apropiado. Incluir elementos que generen sonrisas sin ofender.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="inspirationalTone" class="form-label">Tono Inspiracional</label>
                                                        <textarea class="form-control" id="inspirationalTone" rows="2" placeholder="Descripci√≥n del tono inspiracional...">Motivador, positivo, que impulse a la acci√≥n. Usar mensajes de empoderamiento y crecimiento.</textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <button type="button" class="btn btn-primary" onclick="saveTonePrompts()">
                                                <i class="fas fa-save me-1"></i>Guardar Configuraci√≥n de Tonos
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI Provider Statistics -->
                        <div class="col-md-4 mt-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Estad√≠sticas de IA</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row text-center">
                                        <div class="col-12 mb-3">
                                            <h3 class="text-success" id="connected-ai-providers">0</h3>
                                            <small class="text-muted">Proveedores Conectados</small>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <h6 class="text-primary" id="default-ai-provider">No configurado</h6>
                                            <small class="text-muted">Proveedor Predeterminado</small>
                                        </div>
                                        <div class="col-12">
                                            <h3 class="text-info">3</h3>
                                            <small class="text-muted">Total Disponible</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Account Statistics -->
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Resumen de Cuentas</h5>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-3">
                                        <span>Cuentas conectadas:</span>
                                        <span class="badge bg-success" id="connected-accounts">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-3">
                                        <span>Cuentas pendientes:</span>
                                        <span class="badge bg-warning" id="pending-accounts">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Con errores:</span>
                                        <span class="badge bg-danger" id="error-accounts">0</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-3">
                                <div class="card-header">
                                    <h5 class="mb-0">Configuraci√≥n General</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">Zona Horaria por Defecto</label>
                                        <select class="form-select" id="default-timezone">
                                            <option value="UTC">UTC</option>
                                            <option value="America/New_York">EST (Nueva York)</option>
                                            <option value="America/Los_Angeles">PST (Los √Ångeles)</option>
                                            <option value="Europe/Madrid">CET (Madrid)</option>
                                            <option value="America/Mexico_City">CST (Ciudad de M√©xico)</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="auto-post" checked>
                                            <label class="form-check-label" for="auto-post">
                                                Publicaci√≥n autom√°tica habilitada
                                            </label>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="notifications" checked>
                                            <label class="form-check-label" for="notifications">
                                                Notificaciones por email
                                            </label>
                                        </div>
                                    </div>
                                    <button class="btn btn-primary btn-sm">
                                        <i class="fas fa-save me-1"></i>Guardar Configuraci√≥n
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Social Media Monitoring View -->
                <div id="monitoreo-view" class="view" style="display: none;">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Monitoreo de Redes Sociales</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button type="button" class="btn btn-outline-primary" onclick="loadMonitoringData()">
                                <i class="fas fa-sync-alt me-1"></i>Actualizar
                            </button>
                        </div>
                    </div>
                    
                    <div id="monitoring-container">
                        <div class="text-center text-muted py-5">
                            <i class="fas fa-eye fa-3x mb-3"></i>
                            <p>Cargando datos de monitoreo...</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- Post Detail Modal -->
    <div class="modal fade" id="postDetailModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Detalles del Post</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="post-detail-content">
                        <!-- Post details will be loaded here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-warning">Editar</button>
                    <button type="button" class="btn btn-danger">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    

    
    <!-- Calendar Day Modal -->
    <div class="modal fade" id="calendarDayModal" tabindex="-1" aria-labelledby="calendarDayModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="calendarDayModalLabel">Crear Publicaci√≥n</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Saved Drafts Section -->
                    <div id="savedDrafts" class="mb-4">
                        <!-- Drafts will be loaded here -->
                    </div>
                    
                    <hr class="my-4">
                    
                    <form id="calendarPostForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="calendarPostTitle" class="form-label">T√≠tulo</label>
                                    <input type="text" class="form-control" id="calendarPostTitle" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="calendarPostPlatform" class="form-label">Plataforma</label>
                                    <select class="form-select" id="calendarPostPlatform" required>
                                        <option value="">Seleccionar plataforma</option>
                                        <option value="twitter">Twitter</option>
                                        <option value="linkedin">LinkedIn</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="web">Web/Blog</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="calendarPostContent" class="form-label">Contenido</label>
                            <textarea class="form-control" id="calendarPostContent" rows="4" required></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="calendarPostDate" class="form-label">Fecha</label>
                                    <input type="date" class="form-control" id="calendarPostDate" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="calendarPostTime" class="form-label">Hora</label>
                                    <input type="time" class="form-control" id="calendarPostTime" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="calendarPostTimezone" class="form-label">Zona Horaria</label>
                                    <select class="form-select" id="calendarPostTimezone">
                                        <option value="Europe/Madrid">Europa/Madrid (CET)</option>
                                        <option value="UTC">UTC</option>
                                        <option value="America/New_York">Am√©rica/Nueva_York (EST)</option>
                                        <option value="America/Los_Angeles">Am√©rica/Los_√Ångeles (PST)</option>
                                        <option value="America/Mexico_City">Am√©rica/Ciudad_M√©xico (CST)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-success me-2" onclick="publishNowFromCalendar()">
                        <i class="fas fa-paper-plane me-1"></i>Publicar Ahora
                    </button>
                    <button type="button" class="btn btn-primary" onclick="scheduleFromCalendar()">
                        <i class="fas fa-clock me-1"></i>Programar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Schedule Post Modal -->
    <div class="modal fade" id="scheduleModal" tabindex="-1" aria-labelledby="scheduleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="scheduleModalLabel">Programar Nueva Publicaci√≥n</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="scheduleForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="postTitle" class="form-label">T√≠tulo</label>
                                    <input type="text" class="form-control" id="postTitle" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="postPlatform" class="form-label">Plataforma</label>
                                    <select class="form-select" id="postPlatform" required>
                                        <option value="">Seleccionar plataforma</option>
                                        <option value="linkedin">LinkedIn</option>
                                        <option value="twitter">Twitter</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="facebook">Facebook</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="postContent" class="form-label">Contenido</label>
                            <textarea class="form-control" id="postContent" rows="4" required></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="postDate" class="form-label">Fecha</label>
                                    <input type="date" class="form-control" id="postDate" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="postTime" class="form-label">Hora</label>
                                    <input type="time" class="form-control" id="postTime" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="postTimezone" class="form-label">Zona Horaria</label>
                            <select class="form-select" id="postTimezone">
                                <option value="UTC">UTC</option>
                                <option value="America/New_York">EST (Nueva York)</option>
                                <option value="America/Los_Angeles">PST (Los √Ångeles)</option>
                                <option value="Europe/Madrid" selected>CET (Madrid)</option>
                                <option value="America/Mexico_City">CST (Ciudad de M√©xico)</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="saveScheduledPost">
                        <i class="fas fa-calendar-plus me-2"></i>Programar Publicaci√≥n
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Edit Post Modal -->
    <div class="modal fade" id="editPostModal" tabindex="-1" aria-labelledby="editPostModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editPostModalLabel">Editar Publicaci√≥n</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editPostForm">
                        <input type="hidden" id="editPostId">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPostTitle" class="form-label">T√≠tulo</label>
                                    <input type="text" class="form-control" id="editPostTitle" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPostPlatform" class="form-label">Plataforma</label>
                                    <select class="form-select" id="editPostPlatform" required>
                                        <option value="linkedin">LinkedIn</option>
                                        <option value="twitter">Twitter</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="facebook">Facebook</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="editPostContent" class="form-label">Contenido</label>
                            <textarea class="form-control" id="editPostContent" rows="4" required></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPostDate" class="form-label">Fecha</label>
                                    <input type="date" class="form-control" id="editPostDate" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPostTime" class="form-label">Hora</label>
                                    <input type="time" class="form-control" id="editPostTime" required>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="deleteScheduledPost">
                        <i class="fas fa-trash me-2"></i>Eliminar
                    </button>
                    <button type="button" class="btn btn-primary" id="updateScheduledPost">
                        <i class="fas fa-save me-2"></i>Guardar Cambios
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Social Media Account Modal -->
    <div class="modal fade" id="addAccountModal" tabindex="-1" aria-labelledby="addAccountModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addAccountModalLabel">Agregar Cuenta de Red Social</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addAccountForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="accountPlatform" class="form-label">Plataforma</label>
                                    <select class="form-select" id="accountPlatform" required>
                                        <option value="">Seleccionar plataforma</option>
                                        <option value="linkedin">LinkedIn</option>
                                        <option value="twitter">Twitter</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="facebook">Facebook</option>
                                        <option value="youtube">YouTube</option>
                                        <option value="tiktok">TikTok</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="accountName" class="form-label">Nombre de la Cuenta</label>
                                    <input type="text" class="form-control" id="accountName" placeholder="@usuario o nombre de perfil" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="accountDisplayName" class="form-label">Nombre para Mostrar</label>
                            <input type="text" class="form-control" id="accountDisplayName" placeholder="Nombre descriptivo para identificar la cuenta">
                        </div>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>Conexi√≥n de API:</strong> Para conectar completamente tu cuenta, necesitar√°s proporcionar las credenciales de API de la plataforma. 
                            Esto te permitir√° publicar autom√°ticamente desde el dashboard.
                        </div>
                        
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableAutoPosting">
                                <label class="form-check-label" for="enableAutoPosting">
                                    Habilitar publicaci√≥n autom√°tica para esta cuenta
                                </label>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="isDefaultAccount">
                                <label class="form-check-label" for="isDefaultAccount">
                                    Usar como cuenta predeterminada para esta plataforma
                                </label>
                            </div>
                        </div>
                        
                        <!-- API Credentials Section -->
                        <div class="card bg-light mt-3" id="apiCredentialsSection">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">Credenciales de API</h6>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableAPIConfig">
                                    <label class="form-check-label" for="enableAPIConfig">
                                        Configurar API
                                    </label>
                                </div>
                            </div>
                            <div class="card-body" id="apiCredentialsContent" style="display: none;">
                                <div class="alert alert-warning" id="platformApiHelp">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <strong>Instrucciones:</strong> Selecciona una plataforma arriba para ver las instrucciones espec√≠ficas de configuraci√≥n de API.
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="apiKey" class="form-label">API Key / Client ID</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="apiKey" placeholder="Tu API Key">
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('apiKey')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="apiSecret" class="form-label">API Secret / Client Secret</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="apiSecret" placeholder="Tu API Secret">
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('apiSecret')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="bearerToken" class="form-label">Bearer Token</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="bearerToken" placeholder="AAAA...">
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('bearerToken')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                            <div class="form-text">Requerido para Twitter API v2</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="accessToken" class="form-label">Access Token</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="accessToken" placeholder="Access Token">
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('accessToken')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="accessTokenSecret" class="form-label">Access Token Secret</label>
                                    <div class="input-group">
                                        <input type="password" class="form-control" id="accessTokenSecret" placeholder="Access Token Secret">
                                        <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('accessTokenSecret')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="form-text">Requerido para publicaci√≥n en Twitter</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="webhookUrl" class="form-label">Webhook URL (opcional)</label>
                                    <input type="url" class="form-control" id="webhookUrl" placeholder="https://tu-dominio.com/webhook">
                                    <div class="form-text">Para recibir notificaciones de la plataforma</div>
                                </div>
                                
                                <div class="d-flex gap-2">
                                    <button type="button" class="btn btn-outline-primary" onclick="testApiCredentials()">
                                        <i class="fas fa-vial me-1"></i>Probar Credenciales
                                    </button>
                                    <button type="button" class="btn btn-outline-info" onclick="showApiInstructions()">
                                        <i class="fas fa-question-circle me-1"></i>¬øC√≥mo obtener las claves?
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-outline-primary" id="saveAccountBasic">
                        <i class="fas fa-save me-2"></i>Guardar sin API
                    </button>
                    <button type="button" class="btn btn-primary" id="saveAccountWithAPI">
                        <i class="fas fa-link me-2"></i>Conectar con API
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- AI Provider Configuration Modal -->
    <div class="modal fade" id="aiProviderModal" tabindex="-1" aria-labelledby="aiProviderModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="aiProviderModalLabel">Configurar Proveedores de IA</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <i class="fas fa-shield-alt me-2"></i>
                        <strong>Seguridad:</strong> Todas las API keys se encriptan autom√°ticamente antes de almacenarse.
                    </div>
                    
                    <div class="row">
                        <!-- OpenAI Configuration -->
                        <div class="col-md-12 mb-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-brain text-success me-2"></i>
                                        <h6 class="mb-0">OpenAI GPT-4o</h6>
                                    </div>
                                    <span class="badge bg-secondary" id="openai-status">Desconectado</span>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="openai-api-key" class="form-label">API Key</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="openai-api-key" placeholder="sk-...">
                                            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('openai-api-key')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="form-text">
                                            Obt√©n tu API key en <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-outline-success" onclick="saveAIProvider('openai')">
                                            <i class="fas fa-save me-1"></i>Guardar
                                        </button>
                                        <button type="button" class="btn btn-outline-primary" onclick="testAIProvider('openai')">
                                            <i class="fas fa-vial me-1"></i>Probar
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="disconnectAIProvider('openai')">
                                            <i class="fas fa-unlink me-1"></i>Desconectar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gemini Configuration -->
                        <div class="col-md-12 mb-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-gem text-primary me-2"></i>
                                        <h6 class="mb-0">Google Gemini 2.5 Flash</h6>
                                    </div>
                                    <span class="badge bg-secondary" id="gemini-status">Desconectado</span>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="gemini-api-key" class="form-label">API Key</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="gemini-api-key" placeholder="AIza...">
                                            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('gemini-api-key')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="form-text">
                                            Obt√©n tu API key en <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-outline-success" onclick="saveAIProvider('gemini')">
                                            <i class="fas fa-save me-1"></i>Guardar
                                        </button>
                                        <button type="button" class="btn btn-outline-primary" onclick="testAIProvider('gemini')">
                                            <i class="fas fa-vial me-1"></i>Probar
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="disconnectAIProvider('gemini')">
                                            <i class="fas fa-unlink me-1"></i>Desconectar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Perplexity Configuration -->
                        <div class="col-md-12 mb-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-search text-warning me-2"></i>
                                        <h6 class="mb-0">Perplexity Sonar</h6>
                                    </div>
                                    <span class="badge bg-secondary" id="perplexity-status">Desconectado</span>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="perplexity-api-key" class="form-label">API Key</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="perplexity-api-key" placeholder="pplx-...">
                                            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('perplexity-api-key')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="form-text">
                                            Obt√©n tu API key en <a href="https://www.perplexity.ai/settings/api" target="_blank">Perplexity API Settings</a>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-outline-success" onclick="saveAIProvider('perplexity')">
                                            <i class="fas fa-save me-1"></i>Guardar
                                        </button>
                                        <button type="button" class="btn btn-outline-primary" onclick="testAIProvider('perplexity')">
                                            <i class="fas fa-vial me-1"></i>Probar
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="disconnectAIProvider('perplexity')">
                                            <i class="fas fa-unlink me-1"></i>Desconectar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- API Instructions Modal -->
    <div class="modal fade" id="apiInstructionsModal" tabindex="-1" aria-labelledby="apiInstructionsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="apiInstructionsModalLabel">Configuraci√≥n de API Keys por Plataforma</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist">
                                <button class="nav-link active" id="v-pills-linkedin-tab" data-bs-toggle="pill" data-bs-target="#v-pills-linkedin" type="button">
                                    <i class="fab fa-linkedin me-2"></i>LinkedIn
                                </button>
                                <button class="nav-link" id="v-pills-twitter-tab" data-bs-toggle="pill" data-bs-target="#v-pills-twitter" type="button">
                                    <i class="fab fa-twitter me-2"></i>Twitter
                                </button>
                                <button class="nav-link" id="v-pills-instagram-tab" data-bs-toggle="pill" data-bs-target="#v-pills-instagram" type="button">
                                    <i class="fab fa-instagram me-2"></i>Instagram
                                </button>
                                <button class="nav-link" id="v-pills-facebook-tab" data-bs-toggle="pill" data-bs-target="#v-pills-facebook" type="button">
                                    <i class="fab fa-facebook me-2"></i>Facebook
                                </button>
                                <button class="nav-link" id="v-pills-youtube-tab" data-bs-toggle="pill" data-bs-target="#v-pills-youtube" type="button">
                                    <i class="fab fa-youtube me-2"></i>YouTube
                                </button>
                                <button class="nav-link" id="v-pills-tiktok-tab" data-bs-toggle="pill" data-bs-target="#v-pills-tiktok" type="button">
                                    <i class="fab fa-tiktok me-2"></i>TikTok
                                </button>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <div class="tab-content" id="v-pills-tabContent">
                                <!-- LinkedIn Instructions -->
                                <div class="tab-pane fade show active" id="v-pills-linkedin">
                                    <h6>LinkedIn API Configuration</h6>
                                    <div class="alert alert-info">
                                        <strong>Nota:</strong> LinkedIn requiere autorizaci√≥n para aplicaciones corporativas
                                    </div>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://www.linkedin.com/developers/" target="_blank">LinkedIn Developers</a></li>
                                        <li>Crea una nueva aplicaci√≥n</li>
                                        <li>Copia el <strong>Client ID</strong> y <strong>Client Secret</strong></li>
                                        <li>Configura las URLs de redirecci√≥n</li>
                                        <li>Solicita acceso a la Marketing Developer Platform</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Permisos necesarios:</strong>
                                        <ul class="mb-0">
                                            <li>w_member_social</li>
                                            <li>r_liteprofile</li>
                                            <li>w_organization_social</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- Twitter Instructions -->
                                <div class="tab-pane fade" id="v-pills-twitter">
                                    <h6>Twitter API Configuration</h6>
                                    <div class="alert alert-warning">
                                        <strong>Importante:</strong> Twitter API v2 requiere suscripci√≥n pagada
                                    </div>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://developer.twitter.com/" target="_blank">Twitter Developer Portal</a></li>
                                        <li>Crea un proyecto y una aplicaci√≥n</li>
                                        <li>Genera las claves API y tokens</li>
                                        <li>Configura OAuth 2.0</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Claves necesarias:</strong>
                                        <ul class="mb-0">
                                            <li>API Key (Consumer Key)</li>
                                            <li>API Secret (Consumer Secret)</li>
                                            <li>Bearer Token</li>
                                            <li>Access Token y Access Token Secret</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- Instagram Instructions -->
                                <div class="tab-pane fade" id="v-pills-instagram">
                                    <h6>Instagram API Configuration</h6>
                                    <div class="alert alert-info">
                                        <strong>Nota:</strong> Usa Instagram Basic Display API o Instagram Graph API
                                    </div>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://developers.facebook.com/" target="_blank">Facebook Developers</a></li>
                                        <li>Crea una aplicaci√≥n</li>
                                        <li>Agrega el producto Instagram Basic Display</li>
                                        <li>Configura OAuth redirect URIs</li>
                                        <li>Obt√©n el App ID y App Secret</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Permisos necesarios:</strong>
                                        <ul class="mb-0">
                                            <li>instagram_basic</li>
                                            <li>pages_show_list</li>
                                            <li>pages_read_engagement</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- Facebook Instructions -->
                                <div class="tab-pane fade" id="v-pills-facebook">
                                    <h6>Facebook API Configuration</h6>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://developers.facebook.com/" target="_blank">Facebook Developers</a></li>
                                        <li>Crea una nueva aplicaci√≥n</li>
                                        <li>Agrega el producto Facebook Login</li>
                                        <li>Configura las URLs v√°lidas de OAuth</li>
                                        <li>Obt√©n el App ID y App Secret</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Permisos necesarios:</strong>
                                        <ul class="mb-0">
                                            <li>pages_manage_posts</li>
                                            <li>pages_read_engagement</li>
                                            <li>publish_to_groups</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- YouTube Instructions -->
                                <div class="tab-pane fade" id="v-pills-youtube">
                                    <h6>YouTube API Configuration</h6>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://console.developers.google.com/" target="_blank">Google Cloud Console</a></li>
                                        <li>Crea un nuevo proyecto</li>
                                        <li>Habilita YouTube Data API v3</li>
                                        <li>Crea credenciales OAuth 2.0</li>
                                        <li>Descarga el archivo de credenciales</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Scopes necesarios:</strong>
                                        <ul class="mb-0">
                                            <li>youtube.upload</li>
                                            <li>youtube.readonly</li>
                                            <li>youtube.force-ssl</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- TikTok Instructions -->
                                <div class="tab-pane fade" id="v-pills-tiktok">
                                    <h6>TikTok API Configuration</h6>
                                    <div class="alert alert-warning">
                                        <strong>Beta:</strong> TikTok API est√° en desarrollo limitado
                                    </div>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://developers.tiktok.com/" target="_blank">TikTok Developers</a></li>
                                        <li>Solicita acceso a la API</li>
                                        <li>Crea una aplicaci√≥n</li>
                                        <li>Configura los endpoints de callback</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Nota:</strong> El acceso a TikTok API es limitado y requiere aprobaci√≥n especial.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="openDeveloperConsole()">
                        <i class="fas fa-external-link-alt me-1"></i>Abrir Console de Desarrollador
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modals -->
    
    <!-- Delete Social Account Modal -->
    <div class="modal fade" id="deleteAccountModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirmar Eliminaci√≥n</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="fas fa-exclamation-triangle text-warning fa-3x"></i>
                    </div>
                    <p class="text-center mb-3">
                        ¬øEst√°s seguro de que quieres eliminar esta cuenta de red social?
                    </p>
                    <div class="alert alert-warning">
                        <strong>Esta acci√≥n no se puede deshacer.</strong><br>
                        Se perder√° toda la configuraci√≥n y el historial asociado a esta cuenta.
                    </div>
                    <div id="account-delete-info" class="text-center">
                        <strong>Cuenta:</strong> <span id="account-delete-name"></span><br>
                        <strong>Plataforma:</strong> <span id="account-delete-platform"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirm-delete-account">
                        <i class="fas fa-trash me-1"></i>Eliminar Cuenta
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete AI Provider Modal -->
    <div class="modal fade" id="deleteProviderModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirmar Desconexi√≥n</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="fas fa-unlink text-warning fa-3x"></i>
                    </div>
                    <p class="text-center mb-3">
                        ¬øEst√°s seguro de que quieres desconectar este proveedor de IA?
                    </p>
                    <div class="alert alert-warning">
                        <strong>Esta acci√≥n eliminar√° la API key guardada.</strong><br>
                        Deber√°s volver a configurar las credenciales para usar este proveedor.
                    </div>
                    <div id="provider-delete-info" class="text-center">
                        <strong>Proveedor:</strong> <span id="provider-delete-name"></span><br>
                        <strong>Estado:</strong> <span id="provider-delete-status"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirm-delete-provider">
                        <i class="fas fa-unlink me-1"></i>Desconectar Proveedor
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Safe Utilities (Load First) -->
    <script src="{{ url_for('static', filename='js/safe-utils.js') }}"></script>
    
    <!-- Custom JavaScript -->
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    <script src="{{ url_for('static', filename='js/content-adaptation.js') }}"></script>
    <script src="{{ url_for('static', filename='js/monitoring.js') }}"></script>
    
    <!-- Dashboard entrance transition -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // Start dashboard entrance animation
                setTimeout(() => {
                    if (document.body) {
                        document.body.classList.remove('dashboard-loading');
                        document.body.classList.add('dashboard-loaded');
                    }
                }, 100);

                // Stagger card animations for better visual effect
                const cards = document.querySelectorAll('.dashboard-card');
                if (cards.length > 0) {
                    cards.forEach((card, index) => {
                        if (card) {
                            card.style.opacity = '0';
                            card.style.transform = 'translateY(20px)';
                            card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                            
                            setTimeout(() => {
                                if (card) {
                                    card.style.opacity = '1';
                                    card.style.transform = 'translateY(0)';
                                }
                            }, 200 + (index * 100));
                        }
                    });
                }

                // Add smooth transition for navigation items
                const navItems = document.querySelectorAll('.nav-link');
                if (navItems.length > 0) {
                    navItems.forEach((item, index) => {
                        if (item) {
                            item.style.opacity = '0';
                            item.style.transform = 'translateX(-20px)';
                            item.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                            
                            setTimeout(() => {
                                if (item) {
                                    item.style.opacity = '1';
                                    item.style.transform = 'translateX(0)';
                                }
                            }, 300 + (index * 50));
                        }
                    });
                }
            } catch (error) {
                console.warn('Dashboard transition setup failed:', error);
            }
        });
        
        // Force layout correction for deployment
        function forceSidebarLayout() {
            const sidebar = document.querySelector('.sidebar');
            const main = document.querySelector('main');
            
            if (sidebar) {
                sidebar.style.position = 'fixed';
                sidebar.style.top = '0';
                sidebar.style.left = '0';
                sidebar.style.width = '280px';
                sidebar.style.height = '100vh';
                sidebar.style.zIndex = '9999';
                sidebar.style.overflowY = 'auto';
                sidebar.style.backgroundColor = 'var(--secondary-bg)';
                sidebar.style.borderRight = '2px solid var(--border-color)';
                sidebar.style.boxShadow = '4px 0 12px rgba(0, 0, 0, 0.2)';
                sidebar.style.margin = '0';
                sidebar.style.padding = '0';
            }
            
            if (main) {
                main.style.marginLeft = '280px';
                main.style.width = 'calc(100% - 280px)';
                main.style.padding = '1.5rem';
                main.style.minHeight = '100vh';
                main.style.backgroundColor = 'var(--bg-color)';
            }
            
            // Force container layout
            const container = document.querySelector('.container-fluid');
            const row = document.querySelector('.row');
            
            if (container) {
                container.style.padding = '0';
                container.style.maxWidth = '100%';
                container.style.width = '100%';
            }
            
            if (row) {
                row.style.margin = '0';
                row.style.width = '100%';
            }
        }
        
        // Simple layout correction
        function forceSidebarLayout() {
            const main = document.querySelector('main');
            if (main) {
                main.style.marginLeft = '280px';
                main.style.width = 'calc(100% - 280px)';
                main.style.padding = '1.5rem';
                main.style.minHeight = '100vh';
                main.style.backgroundColor = 'var(--bg-color)';
            }
        }
        
        // Fix configuration section styling issues
        function fixConfigurationComponents() {
            const configView = document.getElementById('configuracion-view');
            if (configView) {
                // Remove any phantom elements or overlays
                configView.style.position = 'relative';
                configView.style.zIndex = 'auto';
                configView.style.overflow = 'visible';
                
                // Fix all cards in configuration
                const cards = configView.querySelectorAll('.card');
                cards.forEach((card, index) => {
                    card.style.background = '#2d3748';
                    card.style.border = '1px solid #4a5568';
                    card.style.borderRadius = '0.5rem';
                    card.style.color = '#e2e8f0';
                    card.style.marginBottom = '1.5rem';
                    card.style.position = 'relative';
                    card.style.zIndex = index + 1;
                    card.style.width = '100%';
                    card.style.boxSizing = 'border-box';
                });
                
                // Fix card headers
                const cardHeaders = configView.querySelectorAll('.card-header');
                cardHeaders.forEach(header => {
                    header.style.background = '#1a202c';
                    header.style.borderBottom = '1px solid #4a5568';
                    header.style.color = '#e2e8f0';
                    header.style.position = 'relative';
                    header.style.zIndex = '2';
                });
                
                // Fix card bodies
                const cardBodies = configView.querySelectorAll('.card-body');
                cardBodies.forEach(body => {
                    body.style.background = '#2d3748';
                    body.style.color = '#e2e8f0';
                    body.style.position = 'relative';
                    body.style.zIndex = '2';
                });
                
                // Fix tabs container
                const navTabs = configView.querySelectorAll('.nav-tabs');
                navTabs.forEach(tabs => {
                    tabs.style.background = '#1a202c';
                    tabs.style.borderRadius = '0.5rem';
                    tabs.style.padding = '0.25rem';
                    tabs.style.borderBottom = '1px solid #4a5568';
                    tabs.style.position = 'relative';
                    tabs.style.zIndex = '3';
                    tabs.style.width = '100%';
                    tabs.style.display = 'flex';
                    tabs.style.flexWrap = 'nowrap';
                });
                
                // Fix tab links
                const tabLinks = configView.querySelectorAll('.nav-tabs .nav-link');
                tabLinks.forEach(link => {
                    link.style.border = 'none';
                    link.style.borderRadius = '0.375rem';
                    link.style.position = 'relative';
                    link.style.zIndex = '4';
                    link.style.pointerEvents = 'auto';
                    link.style.cursor = 'pointer';
                    
                    if (link.classList.contains('active')) {
                        link.style.background = '#ff6b47';
                        link.style.color = 'white';
                    } else {
                        link.style.background = 'transparent';
                        link.style.color = '#a0aec0';
                    }
                });
                
                // Fix form elements
                const formControls = configView.querySelectorAll('.form-control, .form-select');
                formControls.forEach(control => {
                    control.style.background = '#1a202c';
                    control.style.border = '1px solid #4a5568';
                    control.style.color = '#e2e8f0';
                    control.style.borderRadius = '0.375rem';
                    control.style.position = 'relative';
                    control.style.zIndex = '2';
                });
                
                // Remove any overlapping divs or ghost elements
                const allElements = configView.querySelectorAll('*');
                allElements.forEach(element => {
                    // Check for empty divs with just positioning
                    if (element.tagName === 'DIV' && 
                        element.innerHTML.trim() === '' && 
                        element.children.length === 0 &&
                        !element.classList.length) {
                        element.remove();
                    }
                });
            }
        }
        
        // Force sidebar visibility with pure text
        function createVisibleSidebar() {
            // Create sidebar container with maximum visibility priority
            const sidebarHTML = `
                <div id="nova-nav" style="
                    position: sticky !important; 
                    top: 0 !important; 
                    left: 0 !important; 
                    width: 280px !important; 
                    height: 100vh !important; 
                    background: #1a202c !important; 
                    z-index: 999999 !important;
                    border-right: none !important;
                    font-family: Arial, sans-serif !important;
                    display: block !important;
                    visibility: visible !important;
                    opacity: 1 !important;
                    margin: 0 !important;
                    padding: 0 !important;
                    border: none !important;

                ">
                    <!-- Header -->
                    <div id="sidebar-header" style="padding: 20px; border-bottom: 1px solid #2d3748; color: white;">
                        <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                            <div id="logo-container" style="width: 40px; height: 40px; margin-right: 0.75rem; border-radius: 8px; overflow: hidden; background: transparent; display: flex; align-items: center; justify-content: center;">
                                <img src="/static/nova-logo.png" alt="Nova Logo" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div>
                                <div style="color: #e2e8f0; font-weight: 600; font-size: 1.1rem;">Nova</div>
                                <div style="color: #a0aec0; font-size: 0.85rem;">Admin</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Navigation Links -->
                    <div style="padding: 20px 10px;">
                        <div id="nav-dashboard" onclick="setActiveNavItem('dashboard')" style="
                            padding: 12px; 
                            margin: 5px 0; 
                            background: rgba(255, 107, 71, 0.1); 
                            border-left: 3px solid #ff6b47;
                            color: #e2e8f0; 
                            cursor: pointer;
                            border-radius: 5px;
                        ">
                            üìä Dashboard
                        </div>
                        
                        <div id="nav-calendario" onclick="setActiveNavItem('calendario')" style="
                            padding: 12px; 
                            margin: 5px 0; 
                            color: #a0aec0; 
                            cursor: pointer;
                            border-radius: 5px;
                        " onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                            üìÖ Calendario
                        </div>
                        
                        <div id="nav-crear-contenido" onclick="setActiveNavItem('crear-contenido')" style="
                            padding: 12px; 
                            margin: 5px 0; 
                            color: #a0aec0; 
                            cursor: pointer;
                            border-radius: 5px;
                        " onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                            ‚ûï Crear Contenido
                        </div>
                        
                        <div id="nav-adaptar-contenido" onclick="setActiveNavItem('adaptar-contenido')" style="
                            padding: 12px; 
                            margin: 5px 0; 
                            color: #a0aec0; 
                            cursor: pointer;
                            border-radius: 5px;
                        " onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                            üîÑ Adaptar Contenido
                        </div>
                        
                        <div id="nav-monitoreo" onclick="setActiveNavItem('monitoreo')" style="
                            padding: 12px; 
                            margin: 5px 0; 
                            color: #a0aec0; 
                            cursor: pointer;
                            border-radius: 5px;
                        " onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                            üëÅÔ∏è Monitoreo de Redes
                        </div>
                        
                        <div id="nav-validacion" onclick="setActiveNavItem('validacion')" style="
                            padding: 12px; 
                            margin: 5px 0; 
                            color: #a0aec0; 
                            cursor: pointer;
                            border-radius: 5px;
                        " onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                            ‚úÖ Validaci√≥n
                        </div>
                        
                        <div id="nav-analiticas" onclick="setActiveNavItem('analiticas')" style="
                            padding: 12px; 
                            margin: 5px 0; 
                            color: #a0aec0; 
                            cursor: pointer;
                            border-radius: 5px;
                        " onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                            üìà Anal√≠ticas
                        </div>
                        
                        <div id="nav-configuracion" onclick="setActiveNavItem('configuracion')" style="
                            padding: 12px; 
                            margin: 5px 0; 
                            color: #a0aec0; 
                            cursor: pointer;
                            border-radius: 5px;
                        " onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='transparent'">
                            ‚öôÔ∏è Configuraci√≥n
                        </div>
                    </div>
                    
                    <!-- Footer -->
                    <div style="position: absolute; bottom: 0; width: 100%; padding: 20px; border-top: 1px solid #2d3748;">
                        <button id="nova-theme-toggle" onclick="toggleNovaTheme()" style="
                            width: 100%; 
                            background: #2d3748; 
                            border: 1px solid #4a5568; 
                            color: #a0aec0; 
                            padding: 10px; 
                            border-radius: 5px; 
                            cursor: pointer;
                            margin-bottom: 10px;
                        ">
                            üåô Tema Oscuro
                        </button>
                        <a href="/logout" style="
                            width: 100%; 
                            background: #dc3545; 
                            color: white; 
                            padding: 10px; 
                            border-radius: 5px; 
                            text-decoration: none; 
                            display: block; 
                            text-align: center;
                        ">
                            üö™ Cerrar Sesi√≥n
                        </a>
                    </div>
                </div>
            `;
            
            // Create container wrapper for sticky layout
            const containerWrapper = document.createElement('div');
            containerWrapper.style.cssText = 'display: grid; grid-template-columns: 280px 1fr; min-height: 100vh; width: 100%; gap: 0; margin: 0; padding: 0;';
            
            // Insert sidebar HTML into container
            containerWrapper.innerHTML = sidebarHTML;
            
            // Create content wrapper
            const contentWrapper = document.createElement('div');
            contentWrapper.style.cssText = 'flex: 1; overflow-y: auto; max-height: 100vh; padding: 0; margin: 0; border: none; margin-left: -20px;';
            
            // Move existing main content into content wrapper
            const mainContent = document.querySelector('main');
            if (mainContent) {
                mainContent.style.marginLeft = '0';
                mainContent.style.marginRight = '0';
                mainContent.style.margin = '0';
                mainContent.style.transition = 'none';
                mainContent.style.padding = '20px';
                mainContent.style.paddingLeft = '30px';
                mainContent.style.width = '100%';
                mainContent.style.border = 'none';
                contentWrapper.appendChild(mainContent);
            }
            
            // Add content wrapper to container
            containerWrapper.appendChild(contentWrapper);
            
            // Insert container at beginning of body
            document.body.insertBefore(containerWrapper, document.body.firstChild);
        }
        
        // Navigation active state management
        function setActiveNavItem(viewName) {
            // Remove active state from all nav items
            const navItems = ['dashboard', 'calendario', 'crear-contenido', 'adaptar-contenido', 'monitoreo', 'validacion', 'analiticas', 'configuracion'];
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
            
            navItems.forEach(item => {
                const navElement = document.getElementById(`nav-${item}`);
                if (navElement) {
                    // Reset to inactive state
                    navElement.style.background = 'transparent';
                    navElement.style.borderLeft = 'none';
                    navElement.style.color = currentTheme === 'light' ? '#6c757d' : '#a0aec0';
                    
                    // Re-add hover effects
                    navElement.onmouseover = function() {
                        if (this.id !== `nav-${viewName}`) {
                            this.style.background = 'rgba(255,255,255,0.05)';
                        }
                    };
                    navElement.onmouseout = function() {
                        if (this.id !== `nav-${viewName}`) {
                            this.style.background = 'transparent';
                        }
                    };
                }
            });
            
            // Set active state for clicked item
            const activeElement = document.getElementById(`nav-${viewName}`);
            if (activeElement) {
                activeElement.style.background = 'rgba(255, 107, 71, 0.1)';
                activeElement.style.borderLeft = '3px solid #ff6b47';
                activeElement.style.color = currentTheme === 'light' ? '#212529' : '#e2e8f0';
                
                // Remove hover effects from active item
                activeElement.onmouseover = null;
                activeElement.onmouseout = null;
            }
            
            // Call the original showView function
            if (typeof showView === 'function') {
                showView(viewName);
            }
        }
        
        // Theme toggle functionality
        function toggleNovaTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            const themeButton = document.getElementById('nova-theme-toggle');
            const sidebar = document.getElementById('nova-nav');
            
            // Apply theme
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update sidebar theme
            if (sidebar) {
                if (newTheme === 'light') {
                    sidebar.style.background = '#ffffff';
                    sidebar.style.borderRight = '2px solid #dee2e6';
                    
                    // Update header
                    const header = sidebar.querySelector('#sidebar-header');
                    if (header) {
                        header.style.borderBottom = '1px solid #dee2e6';
                        header.style.color = '#212529';
                        const title = header.querySelector('div > div');
                        if (title) title.style.color = '#212529';
                        const subtitle = header.querySelector('div > div:last-child');
                        if (subtitle) subtitle.style.color = '#6c757d';
                        
                        // Keep logo background transparent
                        const logoContainer = header.querySelector('#logo-container');
                        if (logoContainer) logoContainer.style.background = 'transparent';
                    }
                    
                    // Update navigation items
                    const navItems = sidebar.querySelectorAll('div[onclick]');
                    navItems.forEach((item, index) => {
                        if (index === 0) {
                            // Active item
                            item.style.background = 'rgba(255, 107, 71, 0.1)';
                            item.style.color = '#212529';
                        } else {
                            item.style.color = '#6c757d';
                        }
                    });
                    
                    // Update footer
                    const footer = sidebar.querySelector('div[style*="position: absolute"]');
                    if (footer) {
                        footer.style.borderTop = '1px solid #dee2e6';
                        themeButton.style.background = '#f8f9fa';
                        themeButton.style.border = '1px solid #dee2e6';
                        themeButton.style.color = '#212529';
                    }
                } else {
                    sidebar.style.background = '#1a202c';
                    sidebar.style.borderRight = '2px solid #2d3748';
                    
                    // Update header
                    const header = sidebar.querySelector('#sidebar-header');
                    if (header) {
                        header.style.borderBottom = '1px solid #2d3748';
                        header.style.color = 'white';
                        const title = header.querySelector('div > div');
                        if (title) title.style.color = '#e2e8f0';
                        const subtitle = header.querySelector('div > div:last-child');
                        if (subtitle) subtitle.style.color = '#a0aec0';
                        
                        // Keep logo background transparent
                        const logoContainer = header.querySelector('#logo-container');
                        if (logoContainer) logoContainer.style.background = 'transparent';
                    }
                    
                    // Update navigation items
                    const navItems = sidebar.querySelectorAll('div[onclick]');
                    navItems.forEach((item, index) => {
                        if (index === 0) {
                            // Active item
                            item.style.background = 'rgba(255, 107, 71, 0.1)';
                            item.style.color = '#e2e8f0';
                        } else {
                            item.style.color = '#a0aec0';
                        }
                    });
                    
                    // Update footer
                    const footer = sidebar.querySelector('div[style*="position: absolute"]');
                    if (footer) {
                        footer.style.borderTop = '1px solid #2d3748';
                        themeButton.style.background = '#2d3748';
                        themeButton.style.border = '1px solid #4a5568';
                        themeButton.style.color = '#a0aec0';
                    }
                }
            }
            
            // Update button text and icon
            if (newTheme === 'light') {
                themeButton.innerHTML = '‚òÄÔ∏è Tema Claro';
                document.body.style.background = '#f8f9fa';
                document.body.style.color = '#212529';
            } else {
                themeButton.innerHTML = 'üåô Tema Oscuro';
                document.body.style.background = '#1a202c';
                document.body.style.color = '#e2e8f0';
            }
            
            // Update main content theme
            const mainContent = document.querySelector('main');
            if (mainContent) {
                if (newTheme === 'light') {
                    mainContent.style.background = '#ffffff';
                    mainContent.style.color = '#212529';
                } else {
                    mainContent.style.background = '#2d3748';
                    mainContent.style.color = '#e2e8f0';
                }
            }
            
            // Update cards and components theme
            updateComponentsTheme(newTheme);
        }
        
        // Update theme for all components
        function updateComponentsTheme(theme) {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                if (theme === 'light') {
                    card.style.background = '#ffffff';
                    card.style.border = '1px solid #dee2e6';
                    card.style.color = '#212529';
                } else {
                    card.style.background = '#2d3748';
                    card.style.border = '1px solid #4a5568';
                    card.style.color = '#e2e8f0';
                }
            });
        }
        
        // Initialize theme on load
        function initializeNovaTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            const themeButton = document.getElementById('nova-theme-toggle');
            const sidebar = document.getElementById('nova-nav');
            
            if (themeButton) {
                if (savedTheme === 'light') {
                    themeButton.innerHTML = '‚òÄÔ∏è Tema Claro';
                    
                    // Apply light theme to sidebar
                    if (sidebar) {
                        sidebar.style.background = '#ffffff';
                        sidebar.style.borderRight = '2px solid #dee2e6';
                        
                        const header = sidebar.querySelector('#sidebar-header');
                        if (header) {
                            header.style.borderBottom = '1px solid #dee2e6';
                            header.style.color = '#212529';
                            
                            // Keep logo background transparent
                            const logoContainer = header.querySelector('#logo-container');
                            if (logoContainer) logoContainer.style.background = 'transparent';
                        }
                        
                        const navItems = sidebar.querySelectorAll('div[onclick]');
                        navItems.forEach((item, index) => {
                            if (index === 0) {
                                item.style.color = '#212529';
                            } else {
                                item.style.color = '#6c757d';
                            }
                        });
                        
                        const footer = sidebar.querySelector('div[style*="position: absolute"]');
                        if (footer) {
                            footer.style.borderTop = '1px solid #dee2e6';
                            themeButton.style.background = '#f8f9fa';
                            themeButton.style.border = '1px solid #dee2e6';
                            themeButton.style.color = '#212529';
                        }
                    }
                    
                    document.body.style.background = '#f8f9fa';
                    document.body.style.color = '#212529';
                } else {
                    themeButton.innerHTML = 'üåô Tema Oscuro';
                    
                    // Keep dark theme (default)
                    document.body.style.background = '#1a202c';
                    document.body.style.color = '#e2e8f0';
                }
            }
            
            updateComponentsTheme(savedTheme);
        }
        
        // Apply layout fixes
        document.addEventListener('DOMContentLoaded', function() {
            // Create visible sidebar with maximum priority
            createVisibleSidebar();
            
            // Initialize theme after sidebar is created
            setTimeout(() => {
                initializeNovaTheme();
            }, 50);
            
            // Initialize navigation after creating sidebar
            setTimeout(() => {
                if (typeof initializeNavigation === 'function') {
                    initializeNavigation();
                }
                if (typeof setupEventListeners === 'function') {
                    setupEventListeners();
                }
            }, 100);
            
            // Fix configuration when switching views
            document.addEventListener('click', function(e) {
                if (e.target.closest('[data-view="configuracion"]')) {
                    setTimeout(fixConfigurationComponents, 100);
                }
            });
        });
        
        // Apply on window events
        window.addEventListener('resize', forceSidebarLayout);
        window.addEventListener('load', forceSidebarLayout);
    </script>
</body>
</html>
