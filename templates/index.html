<!DOCTYPE html>
<html lang="es" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova - Social Media AI Dashboard</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- Layout fixes for deployment -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layout-fixes.css') }}">
    <!-- Deployment specific fixes -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/deployment-fixes.css') }}">
    
    <!-- Critical inline CSS for deployment -->
    <style>
        /* Force main content visibility */
        main,
        main.col-md-9,
        .col-md-9.ms-sm-auto,
        .col-lg-10 {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            margin-left: 280px !important;
            width: calc(100% - 280px) !important;
            padding: 1.5rem !important;
            padding-top: 0 !important;
            margin-top: 0 !important;
            min-height: 100vh !important;
            position: relative !important;
            z-index: 10 !important;
        }
        
        /* Keep sidebar fixed and simple */
        nav.sidebar {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 280px !important;
            height: 100vh !important;
            z-index: 1000 !important;
            background: #1a202c !important;
            border-right: 2px solid #2d3748 !important;
            display: flex !important;
            flex-direction: column !important;
        }
        
        /* Fix body scroll and layout */
        body, html {
            overflow-x: hidden !important;
            overflow-y: auto !important;
        }
        
        /* Container adjustments */
        .container-fluid {
            padding: 0 !important;
            margin: 0 !important;
        }
        
        /* Remove any extra elements that might cause the color block */
        .row::after, .row::before {
            display: none !important;
        }
        
        .view {
            display: none !important;
        }
        
        .view.active {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        .dashboard-card,
        .card,
        .row,
        .col-md-6 {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        /* Force sticky sidebar layout */
        body {
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .sidebar,
        nav.sidebar,
        .col-md-3.sidebar,
        .col-lg-2.sidebar,
        nav.col-md-3.sidebar,
        nav.col-lg-2.sidebar {
            position: sticky !important;
            top: 0 !important;
            left: 0 !important;
            width: 280px !important;
            height: 100vh !important;
            z-index: 9999 !important;
            background-color: #1a202c !important;
            border-right: 2px solid #2d3748 !important;
            box-shadow: 4px 0 12px rgba(0, 0, 0, 0.2) !important;
            overflow-y: auto !important;
            flex: none !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        /* Layout for sticky sidebar */
        .flex-container {
            display: flex !important;
            min-height: 100vh !important;
            width: 100% !important;
            gap: 0 !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .content-area {
            flex: 1 !important;
            overflow-y: auto !important;
            max-height: 100vh !important;
            padding: 0 !important;
            margin: 0 !important;
            border-left: none !important;
        }
        
        /* Force content to stick to sidebar */
        main {
            margin-left: 0 !important;
            padding-left: 30px !important;
            padding-top: 20px !important;
            padding-right: 20px !important;
            padding-bottom: 20px !important;
        }
        
        /* Force navigation elements visibility */
        .sidebar div[style*="flex: 1"] {
            visibility: visible !important;
            opacity: 1 !important;
            display: block !important;
            background: #1a202c !important;
        }
        
        .sidebar div[style*="flex: 1"] > div {
            visibility: visible !important;
            opacity: 1 !important;
            display: block !important;
            margin-bottom: 1rem !important;
            padding: 0.75rem !important;
        }
        
        .sidebar div[style*="flex: 1"] > div > a {
            visibility: visible !important;
            opacity: 1 !important;
            display: flex !important;
            color: #a0aec0 !important;
            text-decoration: none !important;
        }
        
        .sidebar div[style*="flex: 1"] > div:first-child {
            background: rgba(255, 107, 71, 0.1) !important;
            border-left: 3px solid #ff6b47 !important;
        }
        
        .sidebar div[style*="flex: 1"] > div:first-child > a {
            color: #e2e8f0 !important;
        }
        
        /* Force main content positioning */
        main,
        main.col-md-9,
        main.ms-sm-auto,
        main.col-lg-10,
        main.col-md-9.ms-sm-auto.col-lg-10 {
            margin-left: 280px !important;
            width: calc(100% - 280px) !important;
            padding: 1.5rem !important;
            min-height: 100vh !important;
            background-color: var(--bg-color) !important;
        }
        
        /* Container overrides */
        .container-fluid {
            padding: 0 !important;
            max-width: 100% !important;
        }
        
        .row {
            margin: 0 !important;
            width: 100% !important;
        }
        
        /* Sidebar internal structure */
        .sidebar .position-sticky {
            position: relative !important;
            height: 100vh !important;
            display: flex !important;
            flex-direction: column !important;
        }
        
        .sidebar .user-info {
            padding: 1rem !important;
            border-bottom: 1px solid var(--border-color) !important;
            flex-shrink: 0 !important;
        }
        
        .sidebar .nav {
            flex: 1 !important;
            padding: 0 1rem !important;
        }
        
        .sidebar .sidebar-footer {
            padding: 1rem !important;
            border-top: 1px solid var(--border-color) !important;
            margin-top: auto !important;
            flex-shrink: 0 !important;
        }
        
        /* Force sidebar visibility and navigation elements */
        .sidebar {
            visibility: visible !important;
            opacity: 1 !important;
            display: flex !important;
            z-index: 999999 !important;
        }
        
        .sidebar [data-view] {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: relative !important;
            z-index: 10 !important;
        }

        /* Sidebar Structure Restore */
        .sidebar {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            height: 100vh !important;
            width: 280px !important;
            background-color: var(--sidebar-bg) !important;
            border-right: 2px solid var(--border-color) !important;
            z-index: 1050 !important;
            display: flex !important;
            flex-direction: column !important;
            overflow-y: auto !important;
        }

        .sidebar-brand {
            padding: 1.5rem 1rem !important;
            border-bottom: 1px solid var(--border-color) !important;
            display: flex !important;
            align-items: center !important;
            justify-content: space-between !important;
        }

        .sidebar-logo {
            width: 40px !important;
            height: 40px !important;
            border-radius: 8px !important;
            margin-right: 0.75rem !important;
        }

        .brand-text h5 {
            color: var(--text-primary) !important;
            margin: 0 !important;
        }

        .brand-text small {
            color: var(--text-secondary) !important;
        }

        .sidebar-nav {
            flex: 1 !important;
            padding: 1rem !important;
        }

        .sidebar-nav .nav-link {
            display: flex !important;
            align-items: center !important;
            padding: 0.75rem !important;
            color: var(--text-secondary) !important;
            text-decoration: none !important;
            border-radius: 0.375rem !important;
            margin-bottom: 0.5rem !important;
            transition: all 0.2s ease !important;
        }

        .sidebar-nav .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.05) !important;
            color: var(--text-primary) !important;
        }

        .sidebar-nav .nav-link.active {
            background-color: rgba(255, 107, 71, 0.1) !important;
            color: var(--text-primary) !important;
            border-left: 3px solid #ff6b47 !important;
        }

        .sidebar-nav .nav-link i {
            width: 20px !important;
            margin-right: 0.75rem !important;
            text-align: center !important;
        }

        .sidebar-nav .nav-link.active i {
            color: #ff6b47 !important;
        }

        .sidebar-footer {
            padding: 1rem !important;
            border-top: 1px solid var(--border-color) !important;
            display: flex !important;
            align-items: center !important;
            justify-content: space-between !important;
        }

        .sidebar-footer span {
            color: var(--text-secondary) !important;
            font-size: 0.875rem !important;
        }
    </style>
</head>
<body class="dashboard-loading">
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-dark sidebar collapse">
                <div class="position-sticky pt-3">
                    <!-- Brand -->
                    <div class="user-info mb-4">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="me-3">
                                    <img src="{{ url_for('static', filename='nova-logo.png') }}" alt="Nova Logo" style="height: 40px; width: 40px; border-radius: 8px;">
                                </div>
                                <div>
                                    <h6 class="mb-0 text-white">Nova</h6>
                                    <small class="text-muted">Admin</small>
                                </div>
                            </div>
                            <div class="dropdown">
                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-user"></i>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="{{ url_for('logout') }}">
                                        <i class="fas fa-sign-out-alt me-2"></i>Cerrar Sesión
                                    </a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Navigation -->
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active text-white" data-view="dashboard" href="#">
                                <i class="fas fa-home"></i>
                                Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-light" data-view="calendario" href="#">
                                <i class="fas fa-calendar"></i>
                                Calendario
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-light" data-view="crear-contenido" href="#">
                                <i class="fas fa-plus"></i>
                                Crear Contenido
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-light" data-view="adaptar-contenido" href="#">
                                <i class="fas fa-magic"></i>
                                Adaptar Contenido
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-light" data-view="monitoreo" href="#">
                                <i class="fas fa-eye"></i>
                                Monitoreo de Redes
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-light" data-view="validacion" href="#">
                                <i class="fas fa-check-circle"></i>
                                Validación
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-light" data-view="analiticas" href="#">
                                <i class="fas fa-chart-bar"></i>
                                Analíticas
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-light" data-view="configuracion" href="#">
                                <i class="fas fa-cog"></i>
                                Configuración
                            </a>
                        </li>
                    </ul>
                    
                    <!-- Theme Toggle -->
                    <div class="mt-auto pt-3 border-top">
                        <div class="d-flex justify-content-between align-items-center">
                            <small class="text-muted">© 2025 Nova</small>
                            <button id="theme-toggle" class="btn btn-sm btn-outline-light">
                                <i class="fas fa-moon" id="theme-icon"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </nav>
            
            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- Dashboard View -->
                <div id="dashboard-view" class="view active" style="display: block !important; visibility: visible !important;">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Dashboard</h1>
                    </div>
                    
                    <!-- Dashboard Cards Grid -->
                    <div class="dashboard-cards">
                        <!-- Today's Posts Card -->
                        <div class="card dashboard-card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-calendar-day text-primary me-2"></i>
                                <h6 class="mb-0">Publicaciones Programadas para Hoy</h6>
                            </div>
                            <div class="card-body">
                                <div class="d-flex align-items-center justify-content-between">
                                    <div>
                                        <h2 class="text-primary mb-0" id="today-posts-count">0</h2>
                                        <small class="text-muted">No hay publicaciones programadas para hoy</small>
                                    </div>
                                    <div class="text-primary">
                                        <i class="fas fa-calendar-day fa-2x opacity-50"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pending Approval Card -->
                        <div class="card dashboard-card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-clock text-warning me-2"></i>
                                <h6 class="mb-0">Pendientes de Aprobación</h6>
                            </div>
                            <div class="card-body">
                                <div class="d-flex align-items-center justify-content-between">
                                    <div>
                                        <h2 class="text-warning mb-0" id="pending-posts-count">0</h2>
                                        <a href="#" class="btn btn-sm btn-outline-primary" data-view="validacion">Ir a Validación</a>
                                    </div>
                                    <div class="text-warning">
                                        <i class="fas fa-clock fa-2x opacity-50"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Performance Chart -->
                        <div class="card dashboard-card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-chart-line text-success me-2"></i>
                                <h6 class="mb-0">Rendimiento General (Últimos 7 días)</h6>
                            </div>
                            <div class="card-body">
                                <canvas id="performanceChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                        
                        <!-- Quick Creation -->
                        <div class="card dashboard-card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-magic text-info me-2"></i>
                                <h6 class="mb-0">Creación Rápida</h6>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="quick-topic" class="form-label">Tema del post</label>
                                    <input type="text" class="form-control" id="quick-topic" placeholder="Ej: Nuevo producto, tips, noticias...">
                                </div>
                                <button type="button" class="btn btn-primary" onclick="generateContent()">
                                    <i class="fas fa-magic me-2"></i>Generar Borrador
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Calendar View -->
                <div id="calendario-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Calendario</h1>
                        <div class="d-flex gap-2">
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#scheduleModal">
                                <i class="fas fa-plus me-2"></i>Programar Post
                            </button>
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-outline-primary active" data-calendar-view="month">Mes</button>
                                <button type="button" class="btn btn-outline-primary" data-calendar-view="week">Semana</button>
                                <button type="button" class="btn btn-outline-primary" data-calendar-view="day">Día</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row g-3">
                        <div class="col-md-8">
                            <div class="card content-section">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0" id="calendar-title">Junio 2025</h5>
                                    <div class="btn-group btn-group-sm">
                                        <button type="button" class="btn btn-outline-secondary" id="prev-month">
                                            <i class="fas fa-chevron-left"></i>
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" id="next-month">
                                            <i class="fas fa-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div id="calendar-container">
                                        <!-- Calendar will be rendered here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Próximas Publicaciones</h5>
                                </div>
                                <div class="card-body">
                                    <div id="upcoming-posts">
                                        <!-- Upcoming posts will be loaded here -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-3 content-section">
                                <div class="card-header">
                                    <h5 class="mb-0">Estadísticas del Mes</h5>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Publicaciones programadas:</span>
                                        <span class="badge bg-primary" id="scheduled-count">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Publicaciones enviadas:</span>
                                        <span class="badge bg-success" id="sent-count">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Pendientes:</span>
                                        <span class="badge bg-warning" id="pending-count">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Create Content View -->
                <div id="crear-contenido-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Crear Contenido</h1>
                    </div>
                    
                    <!-- Create Content Cards Grid -->
                    <div class="dashboard-cards">
                        <!-- Topic & AI Configuration -->
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-edit text-primary me-2"></i>
                                <h6 class="mb-0">Configuración de Contenido</h6>
                            </div>
                            <div class="card-body">
                                <form id="content-creation-form">
                                    <div class="mb-3">
                                        <label for="main-topic" class="form-label">Tema Principal</label>
                                        <textarea class="form-control" id="main-topic" rows="3" placeholder="Describe el tema o idea para tu contenido..."></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="tone-voice" class="form-label">Tono de Voz</label>
                                        <select class="form-select" id="tone-voice">
                                            <option value="profesional">Profesional</option>
                                            <option value="ingenioso">Ingenioso</option>
                                            <option value="inspirador">Inspirador</option>
                                            <option value="casual">Casual</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="ai-provider" class="form-label">Proveedor de IA</label>
                                        <select class="form-select" id="ai-provider">
                                            <option value="perplexity">Perplexity Sonar</option>
                                            <option value="openai">OpenAI GPT-4o</option>
                                            <option value="gemini">Google Gemini</option>
                                        </select>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Platform Selection -->
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-share-alt text-success me-2"></i>
                                <h6 class="mb-0">Selección de Plataformas</h6>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Plataformas de Destino</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="linkedin" id="platform-linkedin">
                                        <label class="form-check-label" for="platform-linkedin">
                                            <i class="fab fa-linkedin text-primary me-2"></i>LinkedIn
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="twitter" id="platform-twitter">
                                        <label class="form-check-label" for="platform-twitter">
                                            <i class="fab fa-twitter text-info me-2"></i>Twitter
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="instagram" id="platform-instagram">
                                        <label class="form-check-label" for="platform-instagram">
                                            <i class="fab fa-instagram text-danger me-2"></i>Instagram
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="web" id="platform-web">
                                        <label class="form-check-label" for="platform-web">
                                            <i class="fas fa-globe text-success me-2"></i>Web/Blog
                                        </label>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary" form="content-creation-form">
                                    <i class="fas fa-sparkles me-2"></i>Generar Contenido
                                </button>
                            </div>
                        </div>
                        
                        <!-- Generated Content Results -->
                        <div class="card" style="grid-column: span 2;">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-robot text-info me-2"></i>
                                <h6 class="mb-0">Contenido Generado</h6>
                            </div>
                            <div class="card-body">
                                <div id="generated-content">
                                    <div class="text-center text-muted py-5">
                                        <i class="fas fa-robot fa-3x mb-3"></i>
                                        <p>Completa la configuración y haz clic en "Generar Contenido" para ver los resultados</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Adapt Content View -->
                <div id="adaptar-contenido-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Adaptar Contenido</h1>
                    </div>
                    
                    <!-- Adapt Content Cards Grid -->
                    <div class="dashboard-cards">
                        <!-- Original Content Input -->
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-file-text text-primary me-2"></i>
                                <h6 class="mb-0">Contenido Original</h6>
                            </div>
                            <div class="card-body">
                                <form id="content-adaptation-form">
                                    <div class="mb-3">
                                        <label for="original-content" class="form-label">Artículo o Contenido</label>
                                        <textarea class="form-control" id="original-content" rows="8" placeholder="Pega aquí el contenido que quieres adaptar..."></textarea>
                                        <div class="form-text">
                                            <span id="content-char-count">0</span> caracteres
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Adaptation Settings -->
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-cog text-success me-2"></i>
                                <h6 class="mb-0">Configuración de Adaptación</h6>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="adaptation-style" class="form-label">Estilo</label>
                                    <select class="form-select" id="adaptation-style">
                                        <option value="summary">Resumen</option>
                                        <option value="highlights">Puntos Clave</option>
                                        <option value="questions">Preguntas Engaging</option>
                                        <option value="story">Formato Historia</option>
                                        <option value="tips">Tips/Consejos</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="adaptation-tone" class="form-label">Tono</label>
                                    <select class="form-select" id="adaptation-tone">
                                        <option value="professional">Profesional</option>
                                        <option value="casual">Casual</option>
                                        <option value="humorous">Humorístico</option>
                                        <option value="inspirational">Inspiracional</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="adaptation-provider" class="form-label">Proveedor de IA</label>
                                    <select class="form-select" id="adaptation-provider">
                                        <option value="perplexity">Perplexity</option>
                                        <option value="openai">OpenAI GPT-4o</option>
                                        <option value="gemini">Google Gemini</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Platform Selection -->
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-share-alt text-info me-2"></i>
                                <h6 class="mb-0">Plataformas de Destino</h6>
                            </div>
                            <div class="card-body">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="twitter" id="adapt-twitter">
                                    <label class="form-check-label" for="adapt-twitter">
                                        <i class="fab fa-twitter me-1"></i>Twitter
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="linkedin" id="adapt-linkedin">
                                    <label class="form-check-label" for="adapt-linkedin">
                                        <i class="fab fa-linkedin me-1"></i>LinkedIn
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="instagram" id="adapt-instagram">
                                    <label class="form-check-label" for="adapt-instagram">
                                        <i class="fab fa-instagram me-1"></i>Instagram
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="web" id="adapt-web">
                                    <label class="form-check-label" for="adapt-web">
                                        <i class="fas fa-globe me-1"></i>Blog/Web
                                    </label>
                                </div>
                                
                                <div class="d-grid mt-3">
                                    <button type="button" class="btn btn-primary" onclick="adaptContent()">
                                        <i class="fas fa-magic me-2"></i>Adaptar Contenido
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Adapted Content Results -->
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-magic text-warning me-2"></i>
                                <h6 class="mb-0">Contenido Adaptado</h6>
                            </div>
                            <div class="card-body">
                                <div id="adapted-content-results">
                                    <div class="text-center text-muted py-4">
                                        <i class="fas fa-magic fa-2x mb-3"></i>
                                        <p>Configura las opciones y haz clic en "Adaptar Contenido" para generar versiones optimizadas</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Validation View -->
                <div id="validacion-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Validación</h1>
                    </div>
                    
                    <!-- Validation Cards Grid -->
                    <div class="dashboard-cards">
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-clock text-warning me-2"></i>
                                <h6 class="mb-0">Pendiente de Aprobación</h6>
                            </div>
                            <div class="card-body">
                                <div id="pending-approval-list">
                                    <!-- Pending posts will be loaded here -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-times-circle text-danger me-2"></i>
                                <h6 class="mb-0">Rechazado</h6>
                            </div>
                            <div class="card-body">
                                <div id="rejected-list">
                                    <div class="text-center text-muted py-4">
                                        <i class="fas fa-times-circle fa-2x mb-2"></i>
                                        <p>No hay posts rechazados</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <h6 class="mb-0">Aprobado</h6>
                            </div>
                            <div class="card-body">
                                <div class="text-center text-muted py-4">
                                    <i class="fas fa-check-circle fa-2x mb-2"></i>
                                    <p>No hay posts aprobados recientes</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-chart-line text-info me-2"></i>
                                <h6 class="mb-0">Estadísticas de Validación</h6>
                            </div>
                            <div class="card-body">
                                <div class="text-center">
                                    <div class="row text-center">
                                        <div class="col-6">
                                            <div class="h4 text-warning mb-0">0</div>
                                            <small class="text-muted">Pendientes</small>
                                        </div>
                                        <div class="col-6">
                                            <div class="h4 text-success mb-0">0</div>
                                            <small class="text-muted">Aprobados</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Analytics View -->
                <div id="analiticas-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Analíticas</h1>
                    </div>
                    
                    <!-- Analytics Cards Grid -->
                    <div class="dashboard-cards">
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-chart-line text-success me-2"></i>
                                <h6 class="mb-0">Crecimiento de Seguidores</h6>
                            </div>
                            <div class="card-body">
                                <canvas id="followersChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-chart-pie text-info me-2"></i>
                                <h6 class="mb-0">Tasa de Interacción por Plataforma</h6>
                            </div>
                            <div class="card-body">
                                <canvas id="engagementChart" width="400" height="300"></canvas>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-trophy text-warning me-2"></i>
                                <h6 class="mb-0">Publicaciones con Mejor Rendimiento</h6>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped analytics-table">
                                        <thead>
                                            <tr>
                                                <th>Publicación</th>
                                                <th>Plataforma</th>
                                                <th>Interacciones</th>
                                                <th>Alcance</th>
                                            </tr>
                                        </thead>
                                        <tbody id="top-posts-table">
                                            <!-- Top posts will be loaded here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-calendar-alt text-primary me-2"></i>
                                <h6 class="mb-0">Actividad Reciente</h6>
                            </div>
                            <div class="card-body">
                                <div class="d-flex align-items-center justify-content-center h-100">
                                    <div class="text-center text-muted">
                                        <i class="fas fa-chart-bar fa-3x mb-3 opacity-50"></i>
                                        <p>No hay actividad reciente</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Configuration View -->
                <div id="configuracion-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Configuración</h1>
                    </div>
                    
                    <!-- Configuration Cards Grid -->
                    <div class="dashboard-cards">
                        <!-- Social Media Accounts -->
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-share-alt text-primary me-2"></i>
                                    <h6 class="mb-0">Cuentas de Redes Sociales</h6>
                                </div>
                                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addAccountModal">
                                    <i class="fas fa-plus me-1"></i>Agregar
                                </button>
                            </div>
                            <div class="card-body">
                                <div id="social-accounts-list">
                                    <!-- Social accounts will be loaded here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI Content Generation Providers -->
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-robot text-success me-2"></i>
                                    <h6 class="mb-0">Proveedores de IA</h6>
                                </div>
                                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#aiProviderModal">
                                    <i class="fas fa-key me-1"></i>Configurar
                                </button>
                            </div>
                            <div class="card-body">
                                <div id="ai-providers-list">
                                    <!-- AI providers will be loaded here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Prompt Configuration -->
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-comment-dots text-info me-2"></i>
                                    <h6 class="mb-0">Configuración de Prompts</h6>
                                </div>
                                <button class="btn btn-outline-primary btn-sm" onclick="resetPromptsToDefault()">
                                    <i class="fas fa-undo me-1"></i>Restaurar
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="d-flex align-items-center justify-content-center h-100">
                                    <div class="text-center">
                                        <i class="fas fa-cog fa-2x text-muted mb-2"></i>
                                        <p class="text-muted">Personaliza prompts de IA</p>
                                        <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#promptConfigModal">
                                            Configurar Prompts
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Account Statistics -->
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-chart-bar text-warning me-2"></i>
                                <h6 class="mb-0">Estadísticas de Cuentas</h6>
                            </div>
                            <div class="card-body">
                                <div id="account-stats-summary">
                                    <!-- Account statistics will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Collapsible Prompt Configuration Section -->
                    <div class="collapse mt-4" id="promptConfiguration">
                        <!-- AI Prompt Configuration -->
                        <div class="col-md-12 mt-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Configuración de Prompts de IA</h5>
                                    <button class="btn btn-outline-primary btn-sm" onclick="resetPromptsToDefault()">
                                        <i class="fas fa-undo me-1"></i>Restaurar Predeterminados
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="alert alert-info">
                                        <i class="fas fa-info-circle me-2"></i>
                                        <strong>Personaliza el comportamiento de la IA:</strong> Aquí puedes modificar los prompts que se envían a los proveedores de IA para personalizar el tono, estilo y comportamiento de la generación de contenido.
                                    </div>
                                    
                                    <ul class="nav nav-tabs mb-3" id="promptTabs" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="system-prompt-tab" data-bs-toggle="tab" data-bs-target="#system-prompt" type="button" role="tab">
                                                <i class="fas fa-cog me-1"></i>Prompt del Sistema
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="platform-prompts-tab" data-bs-toggle="tab" data-bs-target="#platform-prompts" type="button" role="tab">
                                                <i class="fas fa-share-alt me-1"></i>Prompts por Plataforma
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="tone-prompts-tab" data-bs-toggle="tab" data-bs-target="#tone-prompts" type="button" role="tab">
                                                <i class="fas fa-palette me-1"></i>Tonos de Voz
                                            </button>
                                        </li>
                                    </ul>
                                    
                                    <div class="tab-content" id="promptTabsContent">
                                        <!-- System Prompt Configuration -->
                                        <div class="tab-pane fade show active" id="system-prompt" role="tabpanel">
                                            <div class="mb-3">
                                                <label for="systemPrompt" class="form-label">Prompt del Sistema</label>
                                                <textarea class="form-control" id="systemPrompt" rows="4" placeholder="Eres un experto en marketing de redes sociales...">Eres un experto en marketing de redes sociales. Crea contenido atractivo basado en información actualizada.</textarea>
                                                <div class="form-text">Este prompt se envía al inicio de cada conversación con la IA para establecer su rol y comportamiento general.</div>
                                            </div>
                                            <button type="button" class="btn btn-primary" onclick="saveSystemPrompt()">
                                                <i class="fas fa-save me-1"></i>Guardar Prompt del Sistema
                                            </button>
                                        </div>
                                        
                                        <!-- Platform-specific Prompts -->
                                        <div class="tab-pane fade" id="platform-prompts" role="tabpanel">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="twitterPrompt" class="form-label">
                                                            <i class="fab fa-twitter me-1"></i>Twitter
                                                        </label>
                                                        <textarea class="form-control" id="twitterPrompt" rows="3" placeholder="Características específicas para Twitter...">Máximo 280 caracteres INCLUYENDO hashtags. Tono conciso y engaging. Contenido directo, sin meta-texto ni explicaciones. No incluyas frases como "Aquí tienes" o "¡Claro!".</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="linkedinPrompt" class="form-label">
                                                            <i class="fab fa-linkedin me-1"></i>LinkedIn
                                                        </label>
                                                        <textarea class="form-control" id="linkedinPrompt" rows="3" placeholder="Características específicas para LinkedIn...">Máximo 3000 caracteres. Tono profesional. Incluir enlaces y menciones profesionales cuando sea apropiado.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="instagramPrompt" class="form-label">
                                                            <i class="fab fa-instagram me-1"></i>Instagram
                                                        </label>
                                                        <textarea class="form-control" id="instagramPrompt" rows="3" placeholder="Características específicas para Instagram...">Máximo 2200 caracteres. Tono visual y atractivo. Incluir llamadas a la acción. Usar hasta 10 hashtags relevantes.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="webPrompt" class="form-label">
                                                            <i class="fas fa-globe me-1"></i>Web/Blog
                                                        </label>
                                                        <textarea class="form-control" id="webPrompt" rows="3" placeholder="Características específicas para contenido web...">Contenido informativo y detallado. Estructura con títulos y subtítulos. Incluir introducción, desarrollo y conclusión.</textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <button type="button" class="btn btn-primary" onclick="savePlatformPrompts()">
                                                <i class="fas fa-save me-1"></i>Guardar Prompts de Plataforma
                                            </button>
                                        </div>
                                        
                                        <!-- Tone Configuration -->
                                        <div class="tab-pane fade" id="tone-prompts" role="tabpanel">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="professionalTone" class="form-label">Tono Profesional</label>
                                                        <textarea class="form-control" id="professionalTone" rows="2" placeholder="Descripción del tono profesional...">Formal, informativo, con terminología especializada cuando sea apropiado. Evitar jerga coloquial.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="casualTone" class="form-label">Tono Casual</label>
                                                        <textarea class="form-control" id="casualTone" rows="2" placeholder="Descripción del tono casual...">Conversacional, amigable, cercano. Usar lenguaje cotidiano y expresiones naturales.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="humorousTone" class="form-label">Tono Humorístico</label>
                                                        <textarea class="form-control" id="humorousTone" rows="2" placeholder="Descripción del tono humorístico...">Divertido, con humor apropiado. Incluir elementos que generen sonrisas sin ofender.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="inspirationalTone" class="form-label">Tono Inspiracional</label>
                                                        <textarea class="form-control" id="inspirationalTone" rows="2" placeholder="Descripción del tono inspiracional...">Motivador, positivo, que impulse a la acción. Usar mensajes de empoderamiento y crecimiento.</textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <button type="button" class="btn btn-primary" onclick="saveTonePrompts()">
                                                <i class="fas fa-save me-1"></i>Guardar Configuración de Tonos
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI Provider Statistics -->
                        <div class="col-md-4 mt-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Estadísticas de IA</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row text-center">
                                        <div class="col-12 mb-3">
                                            <h3 class="text-success" id="connected-ai-providers">0</h3>
                                            <small class="text-muted">Proveedores Conectados</small>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <h6 class="text-primary" id="default-ai-provider">No configurado</h6>
                                            <small class="text-muted">Proveedor Predeterminado</small>
                                        </div>
                                        <div class="col-12">
                                            <h3 class="text-info">3</h3>
                                            <small class="text-muted">Total Disponible</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Account Statistics -->
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Resumen de Cuentas</h5>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-3">
                                        <span>Cuentas conectadas:</span>
                                        <span class="badge bg-success" id="connected-accounts">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-3">
                                        <span>Cuentas pendientes:</span>
                                        <span class="badge bg-warning" id="pending-accounts">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Con errores:</span>
                                        <span class="badge bg-danger" id="error-accounts">0</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-3">
                                <div class="card-header">
                                    <h5 class="mb-0">Configuración General</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">Zona Horaria por Defecto</label>
                                        <select class="form-select" id="default-timezone">
                                            <option value="UTC">UTC</option>
                                            <option value="America/New_York">EST (Nueva York)</option>
                                            <option value="America/Los_Angeles">PST (Los Ángeles)</option>
                                            <option value="Europe/Madrid">CET (Madrid)</option>
                                            <option value="America/Mexico_City">CST (Ciudad de México)</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="auto-post" checked>
                                            <label class="form-check-label" for="auto-post">
                                                Publicación automática habilitada
                                            </label>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="notifications" checked>
                                            <label class="form-check-label" for="notifications">
                                                Notificaciones por email
                                            </label>
                                        </div>
                                    </div>
                                    <button class="btn btn-primary btn-sm">
                                        <i class="fas fa-save me-1"></i>Guardar Configuración
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Social Media Monitoring View -->
                <div id="monitoreo-view" class="view" style="display: none;">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Monitoreo de Redes Sociales</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button type="button" class="btn btn-outline-primary" onclick="loadMonitoringData()">
                                <i class="fas fa-sync-alt me-1"></i>Actualizar
                            </button>
                        </div>
                    </div>
                    
                    <!-- Monitoring Cards Grid -->
                    <div class="dashboard-cards">
                        <!-- Platform Statistics -->
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-chart-bar text-primary me-2"></i>
                                <h6 class="mb-0">Estadísticas por Plataforma</h6>
                            </div>
                            <div class="card-body">
                                <div id="platform-stats">
                                    <div class="text-center text-muted py-4">
                                        <i class="fas fa-chart-bar fa-2x mb-2"></i>
                                        <p>No hay datos de estadísticas</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Recent Posts Activity -->
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-clock text-success me-2"></i>
                                <h6 class="mb-0">Actividad Reciente</h6>
                            </div>
                            <div class="card-body">
                                <div id="recent-activity">
                                    <div class="text-center text-muted py-4">
                                        <i class="fas fa-clock fa-2x mb-2"></i>
                                        <p>No hay actividad reciente</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Engagement Metrics -->
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-heart text-danger me-2"></i>
                                <h6 class="mb-0">Métricas de Engagement</h6>
                            </div>
                            <div class="card-body">
                                <div id="engagement-metrics">
                                    <div class="text-center">
                                        <div class="row text-center">
                                            <div class="col-6">
                                                <div class="h4 text-primary mb-0">0</div>
                                                <small class="text-muted">Likes</small>
                                            </div>
                                            <div class="col-6">
                                                <div class="h4 text-success mb-0">0</div>
                                                <small class="text-muted">Shares</small>
                                            </div>
                                        </div>
                                        <div class="row text-center mt-2">
                                            <div class="col-6">
                                                <div class="h4 text-info mb-0">0</div>
                                                <small class="text-muted">Comments</small>
                                            </div>
                                            <div class="col-6">
                                                <div class="h4 text-warning mb-0">0</div>
                                                <small class="text-muted">Reach</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Post Performance -->
                        <div class="card">
                            <div class="card-header d-flex align-items-center">
                                <i class="fas fa-trophy text-warning me-2"></i>
                                <h6 class="mb-0">Rendimiento de Posts</h6>
                            </div>
                            <div class="card-body">
                                <div id="post-performance">
                                    <div class="text-center text-muted py-4">
                                        <i class="fas fa-trophy fa-2x mb-2"></i>
                                        <p>No hay datos de rendimiento</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- Post Detail Modal -->
    <div class="modal fade" id="postDetailModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Detalles del Post</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="post-detail-content">
                        <!-- Post details will be loaded here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-warning">Editar</button>
                    <button type="button" class="btn btn-danger">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    

    
    <!-- Calendar Day Modal -->
    <div class="modal fade" id="calendarDayModal" tabindex="-1" aria-labelledby="calendarDayModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="calendarDayModalLabel">Crear Publicación</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Saved Drafts Section -->
                    <div id="savedDrafts" class="mb-4">
                        <!-- Drafts will be loaded here -->
                    </div>
                    
                    <hr class="my-4">
                    
                    <form id="calendarPostForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="calendarPostTitle" class="form-label">Título</label>
                                    <input type="text" class="form-control" id="calendarPostTitle" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="calendarPostPlatform" class="form-label">Plataforma</label>
                                    <select class="form-select" id="calendarPostPlatform" required>
                                        <option value="">Seleccionar plataforma</option>
                                        <option value="twitter">Twitter</option>
                                        <option value="linkedin">LinkedIn</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="web">Web/Blog</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="calendarPostContent" class="form-label">Contenido</label>
                            <textarea class="form-control" id="calendarPostContent" rows="4" required></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="calendarPostDate" class="form-label">Fecha</label>
                                    <input type="date" class="form-control" id="calendarPostDate" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="calendarPostTime" class="form-label">Hora</label>
                                    <input type="time" class="form-control" id="calendarPostTime" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="calendarPostTimezone" class="form-label">Zona Horaria</label>
                                    <select class="form-select" id="calendarPostTimezone">
                                        <option value="Europe/Madrid">Europa/Madrid (CET)</option>
                                        <option value="UTC">UTC</option>
                                        <option value="America/New_York">América/Nueva_York (EST)</option>
                                        <option value="America/Los_Angeles">América/Los_Ángeles (PST)</option>
                                        <option value="America/Mexico_City">América/Ciudad_México (CST)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-success me-2" onclick="publishNowFromCalendar()">
                        <i class="fas fa-paper-plane me-1"></i>Publicar Ahora
                    </button>
                    <button type="button" class="btn btn-primary" onclick="scheduleFromCalendar()">
                        <i class="fas fa-clock me-1"></i>Programar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Schedule Post Modal -->
    <div class="modal fade" id="scheduleModal" tabindex="-1" aria-labelledby="scheduleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="scheduleModalLabel">Programar Nueva Publicación</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="scheduleForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="postTitle" class="form-label">Título</label>
                                    <input type="text" class="form-control" id="postTitle" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="postPlatform" class="form-label">Plataforma</label>
                                    <select class="form-select" id="postPlatform" required>
                                        <option value="">Seleccionar plataforma</option>
                                        <option value="linkedin">LinkedIn</option>
                                        <option value="twitter">Twitter</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="facebook">Facebook</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="postContent" class="form-label">Contenido</label>
                            <textarea class="form-control" id="postContent" rows="4" required></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="postDate" class="form-label">Fecha</label>
                                    <input type="date" class="form-control" id="postDate" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="postTime" class="form-label">Hora</label>
                                    <input type="time" class="form-control" id="postTime" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="postTimezone" class="form-label">Zona Horaria</label>
                            <select class="form-select" id="postTimezone">
                                <option value="UTC">UTC</option>
                                <option value="America/New_York">EST (Nueva York)</option>
                                <option value="America/Los_Angeles">PST (Los Ángeles)</option>
                                <option value="Europe/Madrid" selected>CET (Madrid)</option>
                                <option value="America/Mexico_City">CST (Ciudad de México)</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="saveScheduledPost">
                        <i class="fas fa-calendar-plus me-2"></i>Programar Publicación
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Edit Post Modal -->
    <div class="modal fade" id="editPostModal" tabindex="-1" aria-labelledby="editPostModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editPostModalLabel">Editar Publicación</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editPostForm">
                        <input type="hidden" id="editPostId">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPostTitle" class="form-label">Título</label>
                                    <input type="text" class="form-control" id="editPostTitle" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPostPlatform" class="form-label">Plataforma</label>
                                    <select class="form-select" id="editPostPlatform" required>
                                        <option value="linkedin">LinkedIn</option>
                                        <option value="twitter">Twitter</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="facebook">Facebook</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="editPostContent" class="form-label">Contenido</label>
                            <textarea class="form-control" id="editPostContent" rows="4" required></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPostDate" class="form-label">Fecha</label>
                                    <input type="date" class="form-control" id="editPostDate" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPostTime" class="form-label">Hora</label>
                                    <input type="time" class="form-control" id="editPostTime" required>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="deleteScheduledPost">
                        <i class="fas fa-trash me-2"></i>Eliminar
                    </button>
                    <button type="button" class="btn btn-primary" id="updateScheduledPost">
                        <i class="fas fa-save me-2"></i>Guardar Cambios
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Social Media Account Modal -->
    <div class="modal fade" id="addAccountModal" tabindex="-1" aria-labelledby="addAccountModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addAccountModalLabel">Agregar Cuenta de Red Social</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addAccountForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="accountPlatform" class="form-label">Plataforma</label>
                                    <select class="form-select" id="accountPlatform" required>
                                        <option value="">Seleccionar plataforma</option>
                                        <option value="linkedin">LinkedIn</option>
                                        <option value="twitter">Twitter</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="facebook">Facebook</option>
                                        <option value="youtube">YouTube</option>
                                        <option value="tiktok">TikTok</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="accountName" class="form-label">Nombre de la Cuenta</label>
                                    <input type="text" class="form-control" id="accountName" placeholder="@usuario o nombre de perfil" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="accountDisplayName" class="form-label">Nombre para Mostrar</label>
                            <input type="text" class="form-control" id="accountDisplayName" placeholder="Nombre descriptivo para identificar la cuenta">
                        </div>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>Conexión de API:</strong> Para conectar completamente tu cuenta, necesitarás proporcionar las credenciales de API de la plataforma. 
                            Esto te permitirá publicar automáticamente desde el dashboard.
                        </div>
                        
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableAutoPosting">
                                <label class="form-check-label" for="enableAutoPosting">
                                    Habilitar publicación automática para esta cuenta
                                </label>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="isDefaultAccount">
                                <label class="form-check-label" for="isDefaultAccount">
                                    Usar como cuenta predeterminada para esta plataforma
                                </label>
                            </div>
                        </div>
                        
                        <!-- API Credentials Section -->
                        <div class="card bg-light mt-3" id="apiCredentialsSection">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">Credenciales de API</h6>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableAPIConfig">
                                    <label class="form-check-label" for="enableAPIConfig">
                                        Configurar API
                                    </label>
                                </div>
                            </div>
                            <div class="card-body" id="apiCredentialsContent" style="display: none;">
                                <div class="alert alert-warning" id="platformApiHelp">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <strong>Instrucciones:</strong> Selecciona una plataforma arriba para ver las instrucciones específicas de configuración de API.
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="apiKey" class="form-label">API Key / Client ID</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="apiKey" placeholder="Tu API Key">
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('apiKey')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="apiSecret" class="form-label">API Secret / Client Secret</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="apiSecret" placeholder="Tu API Secret">
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('apiSecret')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="bearerToken" class="form-label">Bearer Token</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="bearerToken" placeholder="AAAA...">
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('bearerToken')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                            <div class="form-text">Requerido para Twitter API v2</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="accessToken" class="form-label">Access Token</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="accessToken" placeholder="Access Token">
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('accessToken')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="accessTokenSecret" class="form-label">Access Token Secret</label>
                                    <div class="input-group">
                                        <input type="password" class="form-control" id="accessTokenSecret" placeholder="Access Token Secret">
                                        <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('accessTokenSecret')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="form-text">Requerido para publicación en Twitter</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="webhookUrl" class="form-label">Webhook URL (opcional)</label>
                                    <input type="url" class="form-control" id="webhookUrl" placeholder="https://tu-dominio.com/webhook">
                                    <div class="form-text">Para recibir notificaciones de la plataforma</div>
                                </div>
                                
                                <div class="d-flex gap-2">
                                    <button type="button" class="btn btn-outline-primary" onclick="testApiCredentials()">
                                        <i class="fas fa-vial me-1"></i>Probar Credenciales
                                    </button>
                                    <button type="button" class="btn btn-outline-info" onclick="showApiInstructions()">
                                        <i class="fas fa-question-circle me-1"></i>¿Cómo obtener las claves?
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-outline-primary" id="saveAccountBasic">
                        <i class="fas fa-save me-2"></i>Guardar sin API
                    </button>
                    <button type="button" class="btn btn-primary" id="saveAccountWithAPI">
                        <i class="fas fa-link me-2"></i>Conectar con API
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- AI Provider Configuration Modal -->
    <div class="modal fade" id="aiProviderModal" tabindex="-1" aria-labelledby="aiProviderModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="aiProviderModalLabel">Configurar Proveedores de IA</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <i class="fas fa-shield-alt me-2"></i>
                        <strong>Seguridad:</strong> Todas las API keys se encriptan automáticamente antes de almacenarse.
                    </div>
                    
                    <div class="row">
                        <!-- OpenAI Configuration -->
                        <div class="col-md-12 mb-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-brain text-success me-2"></i>
                                        <h6 class="mb-0">OpenAI GPT-4o</h6>
                                    </div>
                                    <span class="badge bg-secondary" id="openai-status">Desconectado</span>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="openai-api-key" class="form-label">API Key</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="openai-api-key" placeholder="sk-...">
                                            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('openai-api-key')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="form-text">
                                            Obtén tu API key en <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-outline-success" onclick="saveAIProvider('openai')">
                                            <i class="fas fa-save me-1"></i>Guardar
                                        </button>
                                        <button type="button" class="btn btn-outline-primary" onclick="testAIProvider('openai')">
                                            <i class="fas fa-vial me-1"></i>Probar
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="disconnectAIProvider('openai')">
                                            <i class="fas fa-unlink me-1"></i>Desconectar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gemini Configuration -->
                        <div class="col-md-12 mb-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-gem text-primary me-2"></i>
                                        <h6 class="mb-0">Google Gemini 2.5 Flash</h6>
                                    </div>
                                    <span class="badge bg-secondary" id="gemini-status">Desconectado</span>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="gemini-api-key" class="form-label">API Key</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="gemini-api-key" placeholder="AIza...">
                                            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('gemini-api-key')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="form-text">
                                            Obtén tu API key en <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-outline-success" onclick="saveAIProvider('gemini')">
                                            <i class="fas fa-save me-1"></i>Guardar
                                        </button>
                                        <button type="button" class="btn btn-outline-primary" onclick="testAIProvider('gemini')">
                                            <i class="fas fa-vial me-1"></i>Probar
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="disconnectAIProvider('gemini')">
                                            <i class="fas fa-unlink me-1"></i>Desconectar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Perplexity Configuration -->
                        <div class="col-md-12 mb-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-search text-warning me-2"></i>
                                        <h6 class="mb-0">Perplexity Sonar</h6>
                                    </div>
                                    <span class="badge bg-secondary" id="perplexity-status">Desconectado</span>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="perplexity-api-key" class="form-label">API Key</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="perplexity-api-key" placeholder="pplx-...">
                                            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('perplexity-api-key')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="form-text">
                                            Obtén tu API key en <a href="https://www.perplexity.ai/settings/api" target="_blank">Perplexity API Settings</a>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-outline-success" onclick="saveAIProvider('perplexity')">
                                            <i class="fas fa-save me-1"></i>Guardar
                                        </button>
                                        <button type="button" class="btn btn-outline-primary" onclick="testAIProvider('perplexity')">
                                            <i class="fas fa-vial me-1"></i>Probar
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="disconnectAIProvider('perplexity')">
                                            <i class="fas fa-unlink me-1"></i>Desconectar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- API Instructions Modal -->
    <div class="modal fade" id="apiInstructionsModal" tabindex="-1" aria-labelledby="apiInstructionsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="apiInstructionsModalLabel">Configuración de API Keys por Plataforma</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist">
                                <button class="nav-link active" id="v-pills-linkedin-tab" data-bs-toggle="pill" data-bs-target="#v-pills-linkedin" type="button">
                                    <i class="fab fa-linkedin me-2"></i>LinkedIn
                                </button>
                                <button class="nav-link" id="v-pills-twitter-tab" data-bs-toggle="pill" data-bs-target="#v-pills-twitter" type="button">
                                    <i class="fab fa-twitter me-2"></i>Twitter
                                </button>
                                <button class="nav-link" id="v-pills-instagram-tab" data-bs-toggle="pill" data-bs-target="#v-pills-instagram" type="button">
                                    <i class="fab fa-instagram me-2"></i>Instagram
                                </button>
                                <button class="nav-link" id="v-pills-facebook-tab" data-bs-toggle="pill" data-bs-target="#v-pills-facebook" type="button">
                                    <i class="fab fa-facebook me-2"></i>Facebook
                                </button>
                                <button class="nav-link" id="v-pills-youtube-tab" data-bs-toggle="pill" data-bs-target="#v-pills-youtube" type="button">
                                    <i class="fab fa-youtube me-2"></i>YouTube
                                </button>
                                <button class="nav-link" id="v-pills-tiktok-tab" data-bs-toggle="pill" data-bs-target="#v-pills-tiktok" type="button">
                                    <i class="fab fa-tiktok me-2"></i>TikTok
                                </button>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <div class="tab-content" id="v-pills-tabContent">
                                <!-- LinkedIn Instructions -->
                                <div class="tab-pane fade show active" id="v-pills-linkedin">
                                    <h6>LinkedIn API Configuration</h6>
                                    <div class="alert alert-info">
                                        <strong>Nota:</strong> LinkedIn requiere autorización para aplicaciones corporativas
                                    </div>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://www.linkedin.com/developers/" target="_blank">LinkedIn Developers</a></li>
                                        <li>Crea una nueva aplicación</li>
                                        <li>Copia el <strong>Client ID</strong> y <strong>Client Secret</strong></li>
                                        <li>Configura las URLs de redirección</li>
                                        <li>Solicita acceso a la Marketing Developer Platform</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Permisos necesarios:</strong>
                                        <ul class="mb-0">
                                            <li>w_member_social</li>
                                            <li>r_liteprofile</li>
                                            <li>w_organization_social</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- Twitter Instructions -->
                                <div class="tab-pane fade" id="v-pills-twitter">
                                    <h6>Twitter API Configuration</h6>
                                    <div class="alert alert-warning">
                                        <strong>Importante:</strong> Twitter API v2 requiere suscripción pagada
                                    </div>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://developer.twitter.com/" target="_blank">Twitter Developer Portal</a></li>
                                        <li>Crea un proyecto y una aplicación</li>
                                        <li>Genera las claves API y tokens</li>
                                        <li>Configura OAuth 2.0</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Claves necesarias:</strong>
                                        <ul class="mb-0">
                                            <li>API Key (Consumer Key)</li>
                                            <li>API Secret (Consumer Secret)</li>
                                            <li>Bearer Token</li>
                                            <li>Access Token y Access Token Secret</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- Instagram Instructions -->
                                <div class="tab-pane fade" id="v-pills-instagram">
                                    <h6>Instagram API Configuration</h6>
                                    <div class="alert alert-info">
                                        <strong>Nota:</strong> Usa Instagram Basic Display API o Instagram Graph API
                                    </div>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://developers.facebook.com/" target="_blank">Facebook Developers</a></li>
                                        <li>Crea una aplicación</li>
                                        <li>Agrega el producto Instagram Basic Display</li>
                                        <li>Configura OAuth redirect URIs</li>
                                        <li>Obtén el App ID y App Secret</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Permisos necesarios:</strong>
                                        <ul class="mb-0">
                                            <li>instagram_basic</li>
                                            <li>pages_show_list</li>
                                            <li>pages_read_engagement</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- Facebook Instructions -->
                                <div class="tab-pane fade" id="v-pills-facebook">
                                    <h6>Facebook API Configuration</h6>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://developers.facebook.com/" target="_blank">Facebook Developers</a></li>
                                        <li>Crea una nueva aplicación</li>
                                        <li>Agrega el producto Facebook Login</li>
                                        <li>Configura las URLs válidas de OAuth</li>
                                        <li>Obtén el App ID y App Secret</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Permisos necesarios:</strong>
                                        <ul class="mb-0">
                                            <li>pages_manage_posts</li>
                                            <li>pages_read_engagement</li>
                                            <li>publish_to_groups</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- YouTube Instructions -->
                                <div class="tab-pane fade" id="v-pills-youtube">
                                    <h6>YouTube API Configuration</h6>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://console.developers.google.com/" target="_blank">Google Cloud Console</a></li>
                                        <li>Crea un nuevo proyecto</li>
                                        <li>Habilita YouTube Data API v3</li>
                                        <li>Crea credenciales OAuth 2.0</li>
                                        <li>Descarga el archivo de credenciales</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Scopes necesarios:</strong>
                                        <ul class="mb-0">
                                            <li>youtube.upload</li>
                                            <li>youtube.readonly</li>
                                            <li>youtube.force-ssl</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- TikTok Instructions -->
                                <div class="tab-pane fade" id="v-pills-tiktok">
                                    <h6>TikTok API Configuration</h6>
                                    <div class="alert alert-warning">
                                        <strong>Beta:</strong> TikTok API está en desarrollo limitado
                                    </div>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://developers.tiktok.com/" target="_blank">TikTok Developers</a></li>
                                        <li>Solicita acceso a la API</li>
                                        <li>Crea una aplicación</li>
                                        <li>Configura los endpoints de callback</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Nota:</strong> El acceso a TikTok API es limitado y requiere aprobación especial.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="openDeveloperConsole()">
                        <i class="fas fa-external-link-alt me-1"></i>Abrir Console de Desarrollador
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modals -->
    
    <!-- Delete Social Account Modal -->
    <div class="modal fade" id="deleteAccountModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirmar Eliminación</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="fas fa-exclamation-triangle text-warning fa-3x"></i>
                    </div>
                    <p class="text-center mb-3">
                        ¿Estás seguro de que quieres eliminar esta cuenta de red social?
                    </p>
                    <div class="alert alert-warning">
                        <strong>Esta acción no se puede deshacer.</strong><br>
                        Se perderá toda la configuración y el historial asociado a esta cuenta.
                    </div>
                    <div id="account-delete-info" class="text-center">
                        <strong>Cuenta:</strong> <span id="account-delete-name"></span><br>
                        <strong>Plataforma:</strong> <span id="account-delete-platform"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirm-delete-account">
                        <i class="fas fa-trash me-1"></i>Eliminar Cuenta
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete AI Provider Modal -->
    <div class="modal fade" id="deleteProviderModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirmar Desconexión</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="fas fa-unlink text-warning fa-3x"></i>
                    </div>
                    <p class="text-center mb-3">
                        ¿Estás seguro de que quieres desconectar este proveedor de IA?
                    </p>
                    <div class="alert alert-warning">
                        <strong>Esta acción eliminará la API key guardada.</strong><br>
                        Deberás volver a configurar las credenciales para usar este proveedor.
                    </div>
                    <div id="provider-delete-info" class="text-center">
                        <strong>Proveedor:</strong> <span id="provider-delete-name"></span><br>
                        <strong>Estado:</strong> <span id="provider-delete-status"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirm-delete-provider">
                        <i class="fas fa-unlink me-1"></i>Desconectar Proveedor
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- CSS for Prompt Modal -->
    <style>
    #promptConfigModal .modal-dialog {
        max-width: 900px !important;
        width: 90% !important;
    }
    #promptConfigModal .modal-body {
        max-height: 70vh;
        overflow-y: auto;
    }
    #promptConfigModal textarea {
        resize: vertical;
        min-height: 80px;
    }
    </style>

    <!-- Prompt Configuration Modal -->
    <div class="modal fade" id="promptConfigModal" tabindex="-1" aria-labelledby="promptConfigModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="promptConfigModalLabel">Configurar Prompts de IA</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Tabs for different prompt types -->
                    <ul class="nav nav-tabs" id="promptTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="system-tab" data-bs-toggle="tab" data-bs-target="#system-prompt" type="button" role="tab">
                                <i class="fas fa-cog me-1"></i>Sistema
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="platform-tab" data-bs-toggle="tab" data-bs-target="#platform-prompts" type="button" role="tab">
                                <i class="fas fa-share-alt me-1"></i>Plataformas
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="tone-tab" data-bs-toggle="tab" data-bs-target="#tone-prompts" type="button" role="tab">
                                <i class="fas fa-microphone me-1"></i>Tonos
                            </button>
                        </li>
                    </ul>
                    
                    <div class="tab-content mt-3" id="promptTabContent">
                        <!-- System Prompt Tab -->
                        <div class="tab-pane fade show active" id="system-prompt" role="tabpanel">
                            <div class="mb-3">
                                <label for="modal-system-prompt" class="form-label">Prompt del Sistema</label>
                                <textarea class="form-control" id="modal-system-prompt" rows="6" placeholder="Define el comportamiento general de la IA..."></textarea>
                                <div class="form-text">Este prompt controla el comportamiento general de la IA en todas las generaciones de contenido.</div>
                            </div>
                            <button type="button" class="btn btn-primary" onclick="saveSystemPromptModal()">
                                <i class="fas fa-save me-1"></i>Guardar Prompt del Sistema
                            </button>
                        </div>
                        
                        <!-- Platform Prompts Tab -->
                        <div class="tab-pane fade" id="platform-prompts" role="tabpanel">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="modal-twitter-prompt" class="form-label">Twitter</label>
                                        <textarea class="form-control" id="modal-twitter-prompt" rows="4" placeholder="Prompt específico para Twitter..."></textarea>
                                    </div>
                                    <div class="mb-3">
                                        <label for="modal-linkedin-prompt" class="form-label">LinkedIn</label>
                                        <textarea class="form-control" id="modal-linkedin-prompt" rows="4" placeholder="Prompt específico para LinkedIn..."></textarea>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="modal-instagram-prompt" class="form-label">Instagram</label>
                                        <textarea class="form-control" id="modal-instagram-prompt" rows="4" placeholder="Prompt específico para Instagram..."></textarea>
                                    </div>
                                    <div class="mb-3">
                                        <label for="modal-web-prompt" class="form-label">Web/Blog</label>
                                        <textarea class="form-control" id="modal-web-prompt" rows="4" placeholder="Prompt específico para Web/Blog..."></textarea>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-primary" onclick="savePlatformPromptsModal()">
                                <i class="fas fa-save me-1"></i>Guardar Prompts de Plataformas
                            </button>
                        </div>
                        
                        <!-- Tone Prompts Tab -->
                        <div class="tab-pane fade" id="tone-prompts" role="tabpanel">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="modal-professional-prompt" class="form-label">Profesional</label>
                                        <textarea class="form-control" id="modal-professional-prompt" rows="4" placeholder="Prompt para tono profesional..."></textarea>
                                    </div>
                                    <div class="mb-3">
                                        <label for="modal-casual-prompt" class="form-label">Casual</label>
                                        <textarea class="form-control" id="modal-casual-prompt" rows="4" placeholder="Prompt para tono casual..."></textarea>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="modal-humorous-prompt" class="form-label">Humorístico</label>
                                        <textarea class="form-control" id="modal-humorous-prompt" rows="4" placeholder="Prompt para tono humorístico..."></textarea>
                                    </div>
                                    <div class="mb-3">
                                        <label for="modal-inspirational-prompt" class="form-label">Inspiracional</label>
                                        <textarea class="form-control" id="modal-inspirational-prompt" rows="4" placeholder="Prompt para tono inspiracional..."></textarea>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-primary" onclick="saveTonePromptsModal()">
                                <i class="fas fa-save me-1"></i>Guardar Prompts de Tonos
                            </button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" onclick="resetPromptsToDefaultModal()">
                        <i class="fas fa-undo me-1"></i>Restablecer por Defecto
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Safe Utilities (Load First) -->
    <script src="{{ url_for('static', filename='js/safe-utils.js') }}"></script>
    
    <!-- Custom JavaScript -->
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    <script src="{{ url_for('static', filename='js/content-adaptation.js') }}"></script>
    <script src="{{ url_for('static', filename='js/monitoring.js') }}"></script>
    
    <!-- Dashboard entrance transition -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // Start dashboard entrance animation
                setTimeout(() => {
                    if (document.body) {
                        document.body.classList.remove('dashboard-loading');
                        document.body.classList.add('dashboard-loaded');
                    }
                }, 100);

                // Stagger card animations for better visual effect
                const cards = document.querySelectorAll('.dashboard-card');
                if (cards.length > 0) {
                    cards.forEach((card, index) => {
                        if (card) {
                            card.style.opacity = '0';
                            card.style.transform = 'translateY(20px)';
                            card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                            
                            setTimeout(() => {
                                if (card) {
                                    card.style.opacity = '1';
                                    card.style.transform = 'translateY(0)';
                                }
                            }, 200 + (index * 100));
                        }
                    });
                }

                // Add smooth transition for navigation items
                const navItems = document.querySelectorAll('.nav-link');
                if (navItems.length > 0) {
                    navItems.forEach((item, index) => {
                        if (item) {
                            item.style.opacity = '0';
                            item.style.transform = 'translateX(-20px)';
                            item.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                            
                            setTimeout(() => {
                                if (item) {
                                    item.style.opacity = '1';
                                    item.style.transform = 'translateX(0)';
                                }
                            }, 300 + (index * 50));
                        }
                    });
                }
            } catch (error) {
                console.warn('Dashboard transition setup failed:', error);
            }
        });
        
        // Force layout correction for deployment
        function forceSidebarLayout() {
            const sidebar = document.querySelector('.sidebar');
            const main = document.querySelector('main');
            
            if (sidebar) {
                sidebar.style.position = 'fixed';
                sidebar.style.top = '0';
                sidebar.style.left = '0';
                sidebar.style.width = '280px';
                sidebar.style.height = '100vh';
                sidebar.style.zIndex = '9999';
                sidebar.style.overflowY = 'auto';
                sidebar.style.backgroundColor = 'var(--secondary-bg)';
                sidebar.style.borderRight = '2px solid var(--border-color)';
                sidebar.style.boxShadow = '4px 0 12px rgba(0, 0, 0, 0.2)';
                sidebar.style.margin = '0';
                sidebar.style.padding = '0';
            }
            
            if (main) {
                main.style.marginLeft = '280px';
                main.style.width = 'calc(100% - 280px)';
                main.style.padding = '1.5rem';
                main.style.minHeight = '100vh';
                main.style.backgroundColor = 'var(--bg-color)';
            }
            
            // Force container layout
            const container = document.querySelector('.container-fluid');
            const row = document.querySelector('.row');
            
            if (container) {
                container.style.padding = '0';
                container.style.maxWidth = '100%';
                container.style.width = '100%';
            }
            
            if (row) {
                row.style.margin = '0';
                row.style.width = '100%';
            }
        }
        
        // Simple layout correction
        function forceSidebarLayout() {
            const main = document.querySelector('main');
            if (main) {
                main.style.marginLeft = '280px';
                main.style.width = 'calc(100% - 280px)';
                main.style.padding = '1.5rem';
                main.style.minHeight = '100vh';
                main.style.backgroundColor = 'var(--bg-color)';
            }
        }
        
        // Fix configuration section styling issues
        function fixConfigurationComponents() {
            const configView = document.getElementById('configuracion-view');
            if (configView) {
                // Remove any phantom elements or overlays
                configView.style.position = 'relative';
                configView.style.zIndex = 'auto';
                configView.style.overflow = 'visible';
                
                // Fix all cards in configuration
                const cards = configView.querySelectorAll('.card');
                cards.forEach((card, index) => {
                    card.style.background = '#2d3748';
                    card.style.border = '1px solid #4a5568';
                    card.style.borderRadius = '0.5rem';
                    card.style.color = '#e2e8f0';
                    card.style.marginBottom = '1.5rem';
                    card.style.position = 'relative';
                    card.style.zIndex = index + 1;
                    card.style.width = '100%';
                    card.style.boxSizing = 'border-box';
                });
                
                // Fix card headers
                const cardHeaders = configView.querySelectorAll('.card-header');
                cardHeaders.forEach(header => {
                    header.style.background = '#1a202c';
                    header.style.borderBottom = '1px solid #4a5568';
                    header.style.color = '#e2e8f0';
                    header.style.position = 'relative';
                    header.style.zIndex = '2';
                });
                
                // Fix card bodies
                const cardBodies = configView.querySelectorAll('.card-body');
                cardBodies.forEach(body => {
                    body.style.background = '#2d3748';
                    body.style.color = '#e2e8f0';
                    body.style.position = 'relative';
                    body.style.zIndex = '2';
                });
                
                // Fix tabs container
                const navTabs = configView.querySelectorAll('.nav-tabs');
                navTabs.forEach(tabs => {
                    tabs.style.background = '#1a202c';
                    tabs.style.borderRadius = '0.5rem';
                    tabs.style.padding = '0.25rem';
                    tabs.style.borderBottom = '1px solid #4a5568';
                    tabs.style.position = 'relative';
                    tabs.style.zIndex = '3';
                    tabs.style.width = '100%';
                    tabs.style.display = 'flex';
                    tabs.style.flexWrap = 'nowrap';
                });
                
                // Fix tab links
                const tabLinks = configView.querySelectorAll('.nav-tabs .nav-link');
                tabLinks.forEach(link => {
                    link.style.border = 'none';
                    link.style.borderRadius = '0.375rem';
                    link.style.position = 'relative';
                    link.style.zIndex = '4';
                    link.style.pointerEvents = 'auto';
                    link.style.cursor = 'pointer';
                    
                    if (link.classList.contains('active')) {
                        link.style.background = '#ff6b47';
                        link.style.color = 'white';
                    } else {
                        link.style.background = 'transparent';
                        link.style.color = '#a0aec0';
                    }
                });
                
                // Fix form elements
                const formControls = configView.querySelectorAll('.form-control, .form-select');
                formControls.forEach(control => {
                    control.style.background = '#1a202c';
                    control.style.border = '1px solid #4a5568';
                    control.style.color = '#e2e8f0';
                    control.style.borderRadius = '0.375rem';
                    control.style.position = 'relative';
                    control.style.zIndex = '2';
                });
                
                // Remove any overlapping divs or ghost elements
                const allElements = configView.querySelectorAll('*');
                allElements.forEach(element => {
                    // Check for empty divs with just positioning
                    if (element.tagName === 'DIV' && 
                        element.innerHTML.trim() === '' && 
                        element.children.length === 0 &&
                        !element.classList.length) {
                        element.remove();
                    }
                });
            }
        }
        
        // Apply layout fixes
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize navigation with existing sidebar only
            if (typeof initializeNavigation === 'function') {
                initializeNavigation();
            }
            if (typeof setupEventListeners === 'function') {
                setupEventListeners();
            }
            
            // Initialize theme
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            // Force sidebar visibility
            forceSidebarVisibility();
            
            // Setup sidebar navigation
            setupSidebarNavigation();
        });
        
        // Force sidebar visibility
        function forceSidebarVisibility() {
            console.log('Forcing sidebar visibility...');
            
            // Find sidebar
            const sidebar = document.querySelector('.sidebar');
            if (sidebar) {
                sidebar.style.display = 'flex';
                sidebar.style.visibility = 'visible';
                sidebar.style.opacity = '1';
                sidebar.style.zIndex = '999999';
                console.log('Sidebar forced visible');
                
                // Force navigation items visibility
                const navItems = sidebar.querySelectorAll('[data-view]');
                console.log('Found nav items to force visible:', navItems.length);
                navItems.forEach((item, index) => {
                    item.style.display = 'flex';
                    item.style.visibility = 'visible';
                    item.style.opacity = '1';
                    item.style.position = 'relative';
                    item.style.zIndex = '10';
                    console.log('Forced visibility for item', index, ':', item.getAttribute('data-view'));
                });
            } else {
                console.error('Sidebar not found!');
            }
        }
        
        // Setup navigation functionality
        function setupSidebarNavigation() {
            console.log('Setting up sidebar navigation...');
            const navLinks = document.querySelectorAll('.nav-link[data-view]');
            console.log('Found navigation links:', navLinks.length);
            
            navLinks.forEach((link, index) => {
                console.log('Setting up link', index, ':', link.getAttribute('data-view'));
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const view = this.getAttribute('data-view');
                    console.log('Clicked on view:', view);
                    if (view) {
                        showView(view);
                        updateSidebarActive(view);
                    }
                });
            });
        }
        
        // Show specific view and hide others
        function showView(viewName) {
            // Hide all views
            document.querySelectorAll('.view').forEach(view => {
                view.style.display = 'none';
                view.classList.remove('active');
            });
            
            // Show the selected view
            const targetView = document.getElementById(viewName + '-view');
            if (targetView) {
                targetView.style.display = 'block';
                targetView.classList.add('active');
                
                // Load view-specific data
                switch(viewName) {
                    case 'dashboard':
                        if (typeof loadDashboardData === 'function') loadDashboardData();
                        break;
                    case 'calendario':
                        if (typeof loadCalendarData === 'function') loadCalendarData();
                        if (typeof loadUpcomingPosts === 'function') loadUpcomingPosts();
                        break;
                    case 'validacion':
                        if (typeof loadValidationData === 'function') loadValidationData();
                        break;
                    case 'analiticas':
                        if (typeof loadAnalyticsData === 'function') loadAnalyticsData();
                        break;
                    case 'configuracion':
                        if (typeof loadConfigurationData === 'function') loadConfigurationData();
                        break;
                    case 'monitoreo':
                        if (typeof loadMonitoringData === 'function') loadMonitoringData();
                        break;
                }
            }
        }
        
        // Update active state in sidebar
        function updateSidebarActive(activeView) {
            const navLinks = document.querySelectorAll('.nav-link[data-view]');
            navLinks.forEach(link => {
                const view = link.getAttribute('data-view');
                
                if (view === activeView) {
                    link.classList.add('active');
                    link.classList.remove('text-light');
                    link.classList.add('text-white');
                } else {
                    link.classList.remove('active');
                    link.classList.remove('text-white');
                    link.classList.add('text-light');
                }
            });
        }
        
        // Theme toggle functionality
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            const themeIcon = document.getElementById('theme-icon');
            
            if (newTheme === 'light') {
                themeIcon.className = 'fas fa-sun';
            } else {
                themeIcon.className = 'fas fa-moon';
            }
        }
    </script>
</body>
</html>
