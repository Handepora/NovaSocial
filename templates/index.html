<!DOCTYPE html>
<html lang="es" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova - Social Media AI Dashboard</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="dashboard-loading">
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-3 col-lg-2 d-md-block sidebar sidebar-entrance">
                <div class="position-sticky pt-3">
                    <!-- Nova Logo and Info -->
                    <div class="user-info mb-4">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="me-3">
                                    <img src="{{ url_for('static', filename='nova-logo.png') }}" alt="Nova Logo" style="height: 40px; width: 40px; border-radius: 8px;">
                                </div>
                                <div>
                                    <h6 class="mb-0">Nova</h6>
                                    <small class="text-muted">Admin</small>
                                </div>
                            </div>
                            <div class="dropdown">
                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-user"></i>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="{{ url_for('logout') }}">
                                        <i class="fas fa-sign-out-alt me-2"></i>Cerrar Sesión
                                    </a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Navigation -->
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#dashboard" data-view="dashboard">
                                <i class="fas fa-home me-2"></i>
                                Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#calendario" data-view="calendario">
                                <i class="fas fa-calendar me-2"></i>
                                Calendario
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#crear-contenido" data-view="crear-contenido">
                                <i class="fas fa-plus me-2"></i>
                                Crear Contenido
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#adaptar-contenido" data-view="adaptar-contenido">
                                <i class="fas fa-magic me-2"></i>
                                Adaptar Contenido
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#monitoreo" data-view="monitoreo">
                                <i class="fas fa-eye me-2"></i>
                                <span class="nav-text-multiline">
                                    <span class="line1">Monitoreo</span>
                                    <span class="line2">de Redes</span>
                                </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#validacion" data-view="validacion">
                                <i class="fas fa-check-circle me-2"></i>
                                Validación
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#analiticas" data-view="analiticas">
                                <i class="fas fa-chart-bar me-2"></i>
                                Analíticas
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#configuracion" data-view="configuracion">
                                <i class="fas fa-cog me-2"></i>
                                Configuración
                            </a>
                        </li>
                    </ul>
                    
                    <!-- Theme Toggle -->
                    <div class="sidebar-footer">
                        <button id="theme-toggle" class="btn btn-outline-secondary btn-sm w-100">
                            <i class="fas fa-moon me-2" id="theme-icon"></i>
                            <span id="theme-text">Modo Claro</span>
                        </button>
                    </div>
                </div>
            </nav>
            
            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 dashboard-entrance">
                <!-- Dashboard View -->
                <div id="dashboard-view" class="view active">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Dashboard</h1>
                    </div>
                    
                    <div class="row g-4">
                        <!-- Today's Posts Card -->
                        <div class="col-md-6">
                            <div class="card dashboard-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="card-title">Publicaciones Programadas para Hoy</h5>
                                        <i class="fas fa-calendar-day text-primary"></i>
                                    </div>
                                    <div class="metric-number" id="today-posts-count">0</div>
                                    <div id="today-posts-list" class="mt-3">
                                        <!-- Posts will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pending Approval Card -->
                        <div class="col-md-6">
                            <div class="card dashboard-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="card-title">Pendientes de Aprobación</h5>
                                        <i class="fas fa-clock text-warning"></i>
                                    </div>
                                    <div class="metric-number" id="pending-posts-count">0</div>
                                    <button class="btn btn-outline-primary mt-3" onclick="showView('validacion')">
                                        Ir a Validación
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Performance Chart -->
                        <div class="col-md-6">
                            <div class="card dashboard-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="card-title">Rendimiento General (Últimos 7 días)</h5>
                                        <i class="fas fa-chart-line text-success"></i>
                                    </div>
                                    <div style="position: relative; height: 200px;">
                                        <canvas id="performanceChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick Creation -->
                        <div class="col-md-6">
                            <div class="card dashboard-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="card-title">Creación Rápida</h5>
                                        <i class="fas fa-plus-circle text-primary"></i>
                                    </div>
                                    <form id="quick-create-form">
                                        <div class="mb-3">
                                            <label for="quick-topic" class="form-label">Tema del post</label>
                                            <input type="text" class="form-control" id="quick-topic" placeholder="Ej: Nuevo producto, tips, noticias...">
                                        </div>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-sparkles me-2"></i>
                                            Generar Borrador
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Calendar View -->
                <div id="calendario-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Calendario</h1>
                        <div class="d-flex gap-2">
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#scheduleModal">
                                <i class="fas fa-plus me-2"></i>Programar Post
                            </button>
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-outline-primary active" data-calendar-view="month">Mes</button>
                                <button type="button" class="btn btn-outline-primary" data-calendar-view="week">Semana</button>
                                <button type="button" class="btn btn-outline-primary" data-calendar-view="day">Día</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row g-3">
                        <div class="col-md-8">
                            <div class="card content-section">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0" id="calendar-title">Junio 2025</h5>
                                    <div class="btn-group btn-group-sm">
                                        <button type="button" class="btn btn-outline-secondary" id="prev-month">
                                            <i class="fas fa-chevron-left"></i>
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" id="next-month">
                                            <i class="fas fa-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div id="calendar-container">
                                        <!-- Calendar will be rendered here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Próximas Publicaciones</h5>
                                </div>
                                <div class="card-body">
                                    <div id="upcoming-posts">
                                        <!-- Upcoming posts will be loaded here -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-3 content-section">
                                <div class="card-header">
                                    <h5 class="mb-0">Estadísticas del Mes</h5>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Publicaciones programadas:</span>
                                        <span class="badge bg-primary" id="scheduled-count">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Publicaciones enviadas:</span>
                                        <span class="badge bg-success" id="sent-count">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Pendientes:</span>
                                        <span class="badge bg-warning" id="pending-count">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Create Content View -->
                <div id="crear-contenido-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Crear Contenido</h1>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card content-section">
                                <div class="card-header">
                                    <h5 class="mb-0">Formulario de Entrada</h5>
                                </div>
                                <div class="card-body">
                                    <form id="content-creation-form">
                                        <div class="mb-3">
                                            <label for="main-topic" class="form-label">Tema Principal</label>
                                            <textarea class="form-control" id="main-topic" rows="3" placeholder="Describe el tema o idea para tu contenido..."></textarea>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="tone-voice" class="form-label">Tono de Voz</label>
                                            <select class="form-select" id="tone-voice">
                                                <option value="profesional">Profesional</option>
                                                <option value="ingenioso">Ingenioso</option>
                                                <option value="inspirador">Inspirador</option>
                                                <option value="casual">Casual</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="ai-provider" class="form-label">Proveedor de IA</label>
                                            <select class="form-select" id="ai-provider">
                                                <option value="perplexity">Perplexity Sonar (Recomendado)</option>
                                                <option value="openai">OpenAI GPT-4o</option>
                                                <option value="gemini">Google Gemini 2.5 Flash</option>
                                            </select>
                                            <div class="form-text">
                                                <i class="fas fa-info-circle me-1"></i>
                                                Configura las API keys en la sección de Configuración
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label">Plataformas</label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="linkedin" id="platform-linkedin">
                                                <label class="form-check-label" for="platform-linkedin">
                                                    <i class="fab fa-linkedin text-primary me-2"></i>LinkedIn
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="twitter" id="platform-twitter">
                                                <label class="form-check-label" for="platform-twitter">
                                                    <i class="fab fa-twitter text-info me-2"></i>Twitter
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="instagram" id="platform-instagram">
                                                <label class="form-check-label" for="platform-instagram">
                                                    <i class="fab fa-instagram text-danger me-2"></i>Instagram
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="web" id="platform-web">
                                                <label class="form-check-label" for="platform-web">
                                                    <i class="fas fa-globe text-success me-2"></i>Web
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-sparkles me-2"></i>
                                            Generar Contenido
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card content-section">
                                <div class="card-header">
                                    <h5 class="mb-0">Área de Resultados</h5>
                                </div>
                                <div class="card-body">
                                    <div id="generated-content">
                                        <div class="text-center text-muted py-5">
                                            <i class="fas fa-robot fa-3x mb-3"></i>
                                            <p>Completa el formulario y haz clic en "Generar Contenido" para ver los resultados</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Adapt Content View -->
                <div id="adaptar-contenido-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Adaptar Contenido</h1>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Contenido Original</h5>
                                </div>
                                <div class="card-body">
                                    <form id="content-adaptation-form">
                                        <div class="mb-3">
                                            <label for="original-content" class="form-label">Pega tu artículo aquí</label>
                                            <textarea class="form-control" id="original-content" rows="12" placeholder="Pega aquí el contenido que quieres adaptar para redes sociales..."></textarea>
                                            <div class="form-text">
                                                <span id="content-char-count">0</span> caracteres
                                            </div>
                                        </div>
                                        
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="adaptation-style" class="form-label">Estilo de Adaptación</label>
                                                    <select class="form-select" id="adaptation-style">
                                                        <option value="summary">Resumen</option>
                                                        <option value="highlights">Puntos Clave</option>
                                                        <option value="questions">Preguntas Engaging</option>
                                                        <option value="story">Formato Historia</option>
                                                        <option value="tips">Tips/Consejos</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="adaptation-tone" class="form-label">Tono</label>
                                                    <select class="form-select" id="adaptation-tone">
                                                        <option value="professional">Profesional</option>
                                                        <option value="casual">Casual</option>
                                                        <option value="humorous">Humorístico</option>
                                                        <option value="inspirational">Inspiracional</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label">Plataformas de Destino</label>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="twitter" id="adapt-twitter">
                                                        <label class="form-check-label" for="adapt-twitter">
                                                            <i class="fab fa-twitter me-1"></i>Twitter
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="linkedin" id="adapt-linkedin">
                                                        <label class="form-check-label" for="adapt-linkedin">
                                                            <i class="fab fa-linkedin me-1"></i>LinkedIn
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="instagram" id="adapt-instagram">
                                                        <label class="form-check-label" for="adapt-instagram">
                                                            <i class="fab fa-instagram me-1"></i>Instagram
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="facebook" id="adapt-facebook">
                                                        <label class="form-check-label" for="adapt-facebook">
                                                            <i class="fab fa-facebook me-1"></i>Facebook
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="youtube" id="adapt-youtube">
                                                        <label class="form-check-label" for="adapt-youtube">
                                                            <i class="fab fa-youtube me-1"></i>YouTube
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="web" id="adapt-web">
                                                        <label class="form-check-label" for="adapt-web">
                                                            <i class="fas fa-globe me-1"></i>Blog/Web
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="adaptation-provider" class="form-label">Proveedor de IA</label>
                                                    <select class="form-select" id="adaptation-provider">
                                                        <option value="perplexity">Perplexity (Recomendado)</option>
                                                        <option value="openai">OpenAI GPT-4o</option>
                                                        <option value="gemini">Google Gemini 2.5</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="adaptation-focus" class="form-label">Enfoque</label>
                                                    <select class="form-select" id="adaptation-focus">
                                                        <option value="engagement">Máximo Engagement</option>
                                                        <option value="information">Informativo</option>
                                                        <option value="viral">Potencial Viral</option>
                                                        <option value="educational">Educativo</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button type="button" class="btn btn-primary btn-lg" onclick="adaptContent()">
                                                <i class="fas fa-magic me-2"></i>Adaptar Contenido
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Contenido Adaptado</h5>
                                </div>
                                <div class="card-body">
                                    <div id="adapted-content-results">
                                        <div class="text-center text-muted py-5">
                                            <i class="fas fa-magic fa-3x mb-3"></i>
                                            <h6>Adapta tu contenido</h6>
                                            <p>Pega tu artículo en el formulario de la izquierda y haz clic en "Adaptar Contenido" para generar versiones optimizadas para cada plataforma</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Validation View -->
                <div id="validacion-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Validación</h1>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-warning">
                                    <h5 class="mb-0">Pendiente de Aprobación</h5>
                                </div>
                                <div class="card-body">
                                    <div id="pending-approval-list">
                                        <!-- Pending posts will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-danger">
                                    <h5 class="mb-0">Rechazado</h5>
                                </div>
                                <div class="card-body">
                                    <div id="rejected-list">
                                        <div class="text-center text-muted py-4">
                                            <i class="fas fa-times-circle fa-2x mb-2"></i>
                                            <p>No hay posts rechazados</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Analytics View -->
                <div id="analiticas-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Analíticas</h1>
                    </div>
                    
                    <div class="row g-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Crecimiento de Seguidores</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="followersChart" width="400" height="200"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Tasa de Interacción por Plataforma</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="engagementChart" width="400" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Publicaciones con Mejor Rendimiento</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped analytics-table">
                                            <thead>
                                                <tr>
                                                    <th>Publicación</th>
                                                    <th>Plataforma</th>
                                                    <th>Interacciones</th>
                                                    <th>Alcance</th>
                                                </tr>
                                            </thead>
                                            <tbody id="top-posts-table">
                                                <!-- Top posts will be loaded here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Configuration View -->
                <div id="configuracion-view" class="view">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Configuración</h1>
                    </div>
                    
                    <div class="row g-4">
                        <!-- Social Media Accounts -->
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Cuentas de Redes Sociales</h5>
                                    <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addAccountModal">
                                        <i class="fas fa-plus me-1"></i>Agregar Cuenta
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div id="social-accounts-list">
                                        <!-- Social accounts will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI Content Generation Providers -->
                        <div class="col-md-8 mt-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">
                                        <i class="fas fa-robot me-2"></i>Proveedores de IA para Generación de Contenido
                                    </h5>
                                    <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#aiProviderModal">
                                        <i class="fas fa-key me-1"></i>Configurar API Keys
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div id="ai-providers-list">
                                        <!-- AI providers will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI Prompt Configuration -->
                        <div class="col-md-12 mt-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Configuración de Prompts de IA</h5>
                                    <button class="btn btn-outline-primary btn-sm" onclick="resetPromptsToDefault()">
                                        <i class="fas fa-undo me-1"></i>Restaurar Predeterminados
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="alert alert-info">
                                        <i class="fas fa-info-circle me-2"></i>
                                        <strong>Personaliza el comportamiento de la IA:</strong> Aquí puedes modificar los prompts que se envían a los proveedores de IA para personalizar el tono, estilo y comportamiento de la generación de contenido.
                                    </div>
                                    
                                    <ul class="nav nav-tabs mb-3" id="promptTabs" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="system-prompt-tab" data-bs-toggle="tab" data-bs-target="#system-prompt" type="button" role="tab">
                                                <i class="fas fa-cog me-1"></i>Prompt del Sistema
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="platform-prompts-tab" data-bs-toggle="tab" data-bs-target="#platform-prompts" type="button" role="tab">
                                                <i class="fas fa-share-alt me-1"></i>Prompts por Plataforma
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="tone-prompts-tab" data-bs-toggle="tab" data-bs-target="#tone-prompts" type="button" role="tab">
                                                <i class="fas fa-palette me-1"></i>Tonos de Voz
                                            </button>
                                        </li>
                                    </ul>
                                    
                                    <div class="tab-content" id="promptTabsContent">
                                        <!-- System Prompt Configuration -->
                                        <div class="tab-pane fade show active" id="system-prompt" role="tabpanel">
                                            <div class="mb-3">
                                                <label for="systemPrompt" class="form-label">Prompt del Sistema</label>
                                                <textarea class="form-control" id="systemPrompt" rows="4" placeholder="Eres un experto en marketing de redes sociales...">Eres un experto en marketing de redes sociales. Crea contenido atractivo basado en información actualizada.</textarea>
                                                <div class="form-text">Este prompt se envía al inicio de cada conversación con la IA para establecer su rol y comportamiento general.</div>
                                            </div>
                                            <button type="button" class="btn btn-primary" onclick="saveSystemPrompt()">
                                                <i class="fas fa-save me-1"></i>Guardar Prompt del Sistema
                                            </button>
                                        </div>
                                        
                                        <!-- Platform-specific Prompts -->
                                        <div class="tab-pane fade" id="platform-prompts" role="tabpanel">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="twitterPrompt" class="form-label">
                                                            <i class="fab fa-twitter me-1"></i>Twitter
                                                        </label>
                                                        <textarea class="form-control" id="twitterPrompt" rows="3" placeholder="Características específicas para Twitter...">Máximo 280 caracteres INCLUYENDO hashtags. Tono conciso y engaging. Contenido directo, sin meta-texto ni explicaciones. No incluyas frases como "Aquí tienes" o "¡Claro!".</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="linkedinPrompt" class="form-label">
                                                            <i class="fab fa-linkedin me-1"></i>LinkedIn
                                                        </label>
                                                        <textarea class="form-control" id="linkedinPrompt" rows="3" placeholder="Características específicas para LinkedIn...">Máximo 3000 caracteres. Tono profesional. Incluir enlaces y menciones profesionales cuando sea apropiado.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="instagramPrompt" class="form-label">
                                                            <i class="fab fa-instagram me-1"></i>Instagram
                                                        </label>
                                                        <textarea class="form-control" id="instagramPrompt" rows="3" placeholder="Características específicas para Instagram...">Máximo 2200 caracteres. Tono visual y atractivo. Incluir llamadas a la acción. Usar hasta 10 hashtags relevantes.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="webPrompt" class="form-label">
                                                            <i class="fas fa-globe me-1"></i>Web/Blog
                                                        </label>
                                                        <textarea class="form-control" id="webPrompt" rows="3" placeholder="Características específicas para contenido web...">Contenido informativo y detallado. Estructura con títulos y subtítulos. Incluir introducción, desarrollo y conclusión.</textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <button type="button" class="btn btn-primary" onclick="savePlatformPrompts()">
                                                <i class="fas fa-save me-1"></i>Guardar Prompts de Plataforma
                                            </button>
                                        </div>
                                        
                                        <!-- Tone Configuration -->
                                        <div class="tab-pane fade" id="tone-prompts" role="tabpanel">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="professionalTone" class="form-label">Tono Profesional</label>
                                                        <textarea class="form-control" id="professionalTone" rows="2" placeholder="Descripción del tono profesional...">Formal, informativo, con terminología especializada cuando sea apropiado. Evitar jerga coloquial.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="casualTone" class="form-label">Tono Casual</label>
                                                        <textarea class="form-control" id="casualTone" rows="2" placeholder="Descripción del tono casual...">Conversacional, amigable, cercano. Usar lenguaje cotidiano y expresiones naturales.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="humorousTone" class="form-label">Tono Humorístico</label>
                                                        <textarea class="form-control" id="humorousTone" rows="2" placeholder="Descripción del tono humorístico...">Divertido, con humor apropiado. Incluir elementos que generen sonrisas sin ofender.</textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="mb-3">
                                                        <label for="inspirationalTone" class="form-label">Tono Inspiracional</label>
                                                        <textarea class="form-control" id="inspirationalTone" rows="2" placeholder="Descripción del tono inspiracional...">Motivador, positivo, que impulse a la acción. Usar mensajes de empoderamiento y crecimiento.</textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <button type="button" class="btn btn-primary" onclick="saveTonePrompts()">
                                                <i class="fas fa-save me-1"></i>Guardar Configuración de Tonos
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI Provider Statistics -->
                        <div class="col-md-4 mt-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Estadísticas de IA</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row text-center">
                                        <div class="col-12 mb-3">
                                            <h3 class="text-success" id="connected-ai-providers">0</h3>
                                            <small class="text-muted">Proveedores Conectados</small>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <h6 class="text-primary" id="default-ai-provider">No configurado</h6>
                                            <small class="text-muted">Proveedor Predeterminado</small>
                                        </div>
                                        <div class="col-12">
                                            <h3 class="text-info">3</h3>
                                            <small class="text-muted">Total Disponible</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Account Statistics -->
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Resumen de Cuentas</h5>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-3">
                                        <span>Cuentas conectadas:</span>
                                        <span class="badge bg-success" id="connected-accounts">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-3">
                                        <span>Cuentas pendientes:</span>
                                        <span class="badge bg-warning" id="pending-accounts">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Con errores:</span>
                                        <span class="badge bg-danger" id="error-accounts">0</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-3">
                                <div class="card-header">
                                    <h5 class="mb-0">Configuración General</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">Zona Horaria por Defecto</label>
                                        <select class="form-select" id="default-timezone">
                                            <option value="UTC">UTC</option>
                                            <option value="America/New_York">EST (Nueva York)</option>
                                            <option value="America/Los_Angeles">PST (Los Ángeles)</option>
                                            <option value="Europe/Madrid">CET (Madrid)</option>
                                            <option value="America/Mexico_City">CST (Ciudad de México)</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="auto-post" checked>
                                            <label class="form-check-label" for="auto-post">
                                                Publicación automática habilitada
                                            </label>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="notifications" checked>
                                            <label class="form-check-label" for="notifications">
                                                Notificaciones por email
                                            </label>
                                        </div>
                                    </div>
                                    <button class="btn btn-primary btn-sm">
                                        <i class="fas fa-save me-1"></i>Guardar Configuración
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Social Media Monitoring View -->
                <div id="monitoreo-view" class="view" style="display: none;">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Monitoreo de Redes Sociales</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button type="button" class="btn btn-outline-primary" onclick="loadMonitoringData()">
                                <i class="fas fa-sync-alt me-1"></i>Actualizar
                            </button>
                        </div>
                    </div>
                    
                    <div id="monitoring-container">
                        <div class="text-center text-muted py-5">
                            <i class="fas fa-eye fa-3x mb-3"></i>
                            <p>Cargando datos de monitoreo...</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- Post Detail Modal -->
    <div class="modal fade" id="postDetailModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Detalles del Post</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="post-detail-content">
                        <!-- Post details will be loaded here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-warning">Editar</button>
                    <button type="button" class="btn btn-danger">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" title="Cambiar tema">
        <i class="fas fa-moon" id="themeIcon"></i>
    </button>
    
    <!-- Schedule Post Modal -->
    <div class="modal fade" id="scheduleModal" tabindex="-1" aria-labelledby="scheduleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="scheduleModalLabel">Programar Nueva Publicación</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="scheduleForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="postTitle" class="form-label">Título</label>
                                    <input type="text" class="form-control" id="postTitle" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="postPlatform" class="form-label">Plataforma</label>
                                    <select class="form-select" id="postPlatform" required>
                                        <option value="">Seleccionar plataforma</option>
                                        <option value="linkedin">LinkedIn</option>
                                        <option value="twitter">Twitter</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="facebook">Facebook</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="postContent" class="form-label">Contenido</label>
                            <textarea class="form-control" id="postContent" rows="4" required></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="postDate" class="form-label">Fecha</label>
                                    <input type="date" class="form-control" id="postDate" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="postTime" class="form-label">Hora</label>
                                    <input type="time" class="form-control" id="postTime" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="postTimezone" class="form-label">Zona Horaria</label>
                            <select class="form-select" id="postTimezone">
                                <option value="UTC">UTC</option>
                                <option value="America/New_York">EST (Nueva York)</option>
                                <option value="America/Los_Angeles">PST (Los Ángeles)</option>
                                <option value="Europe/Madrid" selected>CET (Madrid)</option>
                                <option value="America/Mexico_City">CST (Ciudad de México)</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="saveScheduledPost">
                        <i class="fas fa-calendar-plus me-2"></i>Programar Publicación
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Edit Post Modal -->
    <div class="modal fade" id="editPostModal" tabindex="-1" aria-labelledby="editPostModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editPostModalLabel">Editar Publicación</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editPostForm">
                        <input type="hidden" id="editPostId">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPostTitle" class="form-label">Título</label>
                                    <input type="text" class="form-control" id="editPostTitle" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPostPlatform" class="form-label">Plataforma</label>
                                    <select class="form-select" id="editPostPlatform" required>
                                        <option value="linkedin">LinkedIn</option>
                                        <option value="twitter">Twitter</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="facebook">Facebook</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="editPostContent" class="form-label">Contenido</label>
                            <textarea class="form-control" id="editPostContent" rows="4" required></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPostDate" class="form-label">Fecha</label>
                                    <input type="date" class="form-control" id="editPostDate" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPostTime" class="form-label">Hora</label>
                                    <input type="time" class="form-control" id="editPostTime" required>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="deleteScheduledPost">
                        <i class="fas fa-trash me-2"></i>Eliminar
                    </button>
                    <button type="button" class="btn btn-primary" id="updateScheduledPost">
                        <i class="fas fa-save me-2"></i>Guardar Cambios
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Social Media Account Modal -->
    <div class="modal fade" id="addAccountModal" tabindex="-1" aria-labelledby="addAccountModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addAccountModalLabel">Agregar Cuenta de Red Social</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addAccountForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="accountPlatform" class="form-label">Plataforma</label>
                                    <select class="form-select" id="accountPlatform" required>
                                        <option value="">Seleccionar plataforma</option>
                                        <option value="linkedin">LinkedIn</option>
                                        <option value="twitter">Twitter</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="facebook">Facebook</option>
                                        <option value="youtube">YouTube</option>
                                        <option value="tiktok">TikTok</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="accountName" class="form-label">Nombre de la Cuenta</label>
                                    <input type="text" class="form-control" id="accountName" placeholder="@usuario o nombre de perfil" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="accountDisplayName" class="form-label">Nombre para Mostrar</label>
                            <input type="text" class="form-control" id="accountDisplayName" placeholder="Nombre descriptivo para identificar la cuenta">
                        </div>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>Conexión de API:</strong> Para conectar completamente tu cuenta, necesitarás proporcionar las credenciales de API de la plataforma. 
                            Esto te permitirá publicar automáticamente desde el dashboard.
                        </div>
                        
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableAutoPosting">
                                <label class="form-check-label" for="enableAutoPosting">
                                    Habilitar publicación automática para esta cuenta
                                </label>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="isDefaultAccount">
                                <label class="form-check-label" for="isDefaultAccount">
                                    Usar como cuenta predeterminada para esta plataforma
                                </label>
                            </div>
                        </div>
                        
                        <!-- API Credentials Section -->
                        <div class="card bg-light mt-3" id="apiCredentialsSection">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">Credenciales de API</h6>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableAPIConfig">
                                    <label class="form-check-label" for="enableAPIConfig">
                                        Configurar API
                                    </label>
                                </div>
                            </div>
                            <div class="card-body" id="apiCredentialsContent" style="display: none;">
                                <div class="alert alert-warning" id="platformApiHelp">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <strong>Instrucciones:</strong> Selecciona una plataforma arriba para ver las instrucciones específicas de configuración de API.
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="apiKey" class="form-label">API Key / Client ID</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="apiKey" placeholder="Tu API Key">
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('apiKey')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="apiSecret" class="form-label">API Secret / Client Secret</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="apiSecret" placeholder="Tu API Secret">
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('apiSecret')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="bearerToken" class="form-label">Bearer Token</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="bearerToken" placeholder="AAAA...">
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('bearerToken')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                            <div class="form-text">Requerido para Twitter API v2</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="accessToken" class="form-label">Access Token</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="accessToken" placeholder="Access Token">
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('accessToken')">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="accessTokenSecret" class="form-label">Access Token Secret</label>
                                    <div class="input-group">
                                        <input type="password" class="form-control" id="accessTokenSecret" placeholder="Access Token Secret">
                                        <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('accessTokenSecret')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="form-text">Requerido para publicación en Twitter</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="webhookUrl" class="form-label">Webhook URL (opcional)</label>
                                    <input type="url" class="form-control" id="webhookUrl" placeholder="https://tu-dominio.com/webhook">
                                    <div class="form-text">Para recibir notificaciones de la plataforma</div>
                                </div>
                                
                                <div class="d-flex gap-2">
                                    <button type="button" class="btn btn-outline-primary" onclick="testApiCredentials()">
                                        <i class="fas fa-vial me-1"></i>Probar Credenciales
                                    </button>
                                    <button type="button" class="btn btn-outline-info" onclick="showApiInstructions()">
                                        <i class="fas fa-question-circle me-1"></i>¿Cómo obtener las claves?
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-outline-primary" id="saveAccountBasic">
                        <i class="fas fa-save me-2"></i>Guardar sin API
                    </button>
                    <button type="button" class="btn btn-primary" id="saveAccountWithAPI">
                        <i class="fas fa-link me-2"></i>Conectar con API
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- AI Provider Configuration Modal -->
    <div class="modal fade" id="aiProviderModal" tabindex="-1" aria-labelledby="aiProviderModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="aiProviderModalLabel">Configurar Proveedores de IA</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <i class="fas fa-shield-alt me-2"></i>
                        <strong>Seguridad:</strong> Todas las API keys se encriptan automáticamente antes de almacenarse.
                    </div>
                    
                    <div class="row">
                        <!-- OpenAI Configuration -->
                        <div class="col-md-12 mb-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-brain text-success me-2"></i>
                                        <h6 class="mb-0">OpenAI GPT-4o</h6>
                                    </div>
                                    <span class="badge bg-secondary" id="openai-status">Desconectado</span>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="openai-api-key" class="form-label">API Key</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="openai-api-key" placeholder="sk-...">
                                            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('openai-api-key')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="form-text">
                                            Obtén tu API key en <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-outline-success" onclick="saveAIProvider('openai')">
                                            <i class="fas fa-save me-1"></i>Guardar
                                        </button>
                                        <button type="button" class="btn btn-outline-primary" onclick="testAIProvider('openai')">
                                            <i class="fas fa-vial me-1"></i>Probar
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="disconnectAIProvider('openai')">
                                            <i class="fas fa-unlink me-1"></i>Desconectar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gemini Configuration -->
                        <div class="col-md-12 mb-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-gem text-primary me-2"></i>
                                        <h6 class="mb-0">Google Gemini 2.5 Flash</h6>
                                    </div>
                                    <span class="badge bg-secondary" id="gemini-status">Desconectado</span>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="gemini-api-key" class="form-label">API Key</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="gemini-api-key" placeholder="AIza...">
                                            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('gemini-api-key')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="form-text">
                                            Obtén tu API key en <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-outline-success" onclick="saveAIProvider('gemini')">
                                            <i class="fas fa-save me-1"></i>Guardar
                                        </button>
                                        <button type="button" class="btn btn-outline-primary" onclick="testAIProvider('gemini')">
                                            <i class="fas fa-vial me-1"></i>Probar
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="disconnectAIProvider('gemini')">
                                            <i class="fas fa-unlink me-1"></i>Desconectar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Perplexity Configuration -->
                        <div class="col-md-12 mb-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-search text-warning me-2"></i>
                                        <h6 class="mb-0">Perplexity Sonar</h6>
                                    </div>
                                    <span class="badge bg-secondary" id="perplexity-status">Desconectado</span>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="perplexity-api-key" class="form-label">API Key</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="perplexity-api-key" placeholder="pplx-...">
                                            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('perplexity-api-key')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="form-text">
                                            Obtén tu API key en <a href="https://www.perplexity.ai/settings/api" target="_blank">Perplexity API Settings</a>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-outline-success" onclick="saveAIProvider('perplexity')">
                                            <i class="fas fa-save me-1"></i>Guardar
                                        </button>
                                        <button type="button" class="btn btn-outline-primary" onclick="testAIProvider('perplexity')">
                                            <i class="fas fa-vial me-1"></i>Probar
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="disconnectAIProvider('perplexity')">
                                            <i class="fas fa-unlink me-1"></i>Desconectar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- API Instructions Modal -->
    <div class="modal fade" id="apiInstructionsModal" tabindex="-1" aria-labelledby="apiInstructionsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="apiInstructionsModalLabel">Configuración de API Keys por Plataforma</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist">
                                <button class="nav-link active" id="v-pills-linkedin-tab" data-bs-toggle="pill" data-bs-target="#v-pills-linkedin" type="button">
                                    <i class="fab fa-linkedin me-2"></i>LinkedIn
                                </button>
                                <button class="nav-link" id="v-pills-twitter-tab" data-bs-toggle="pill" data-bs-target="#v-pills-twitter" type="button">
                                    <i class="fab fa-twitter me-2"></i>Twitter
                                </button>
                                <button class="nav-link" id="v-pills-instagram-tab" data-bs-toggle="pill" data-bs-target="#v-pills-instagram" type="button">
                                    <i class="fab fa-instagram me-2"></i>Instagram
                                </button>
                                <button class="nav-link" id="v-pills-facebook-tab" data-bs-toggle="pill" data-bs-target="#v-pills-facebook" type="button">
                                    <i class="fab fa-facebook me-2"></i>Facebook
                                </button>
                                <button class="nav-link" id="v-pills-youtube-tab" data-bs-toggle="pill" data-bs-target="#v-pills-youtube" type="button">
                                    <i class="fab fa-youtube me-2"></i>YouTube
                                </button>
                                <button class="nav-link" id="v-pills-tiktok-tab" data-bs-toggle="pill" data-bs-target="#v-pills-tiktok" type="button">
                                    <i class="fab fa-tiktok me-2"></i>TikTok
                                </button>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <div class="tab-content" id="v-pills-tabContent">
                                <!-- LinkedIn Instructions -->
                                <div class="tab-pane fade show active" id="v-pills-linkedin">
                                    <h6>LinkedIn API Configuration</h6>
                                    <div class="alert alert-info">
                                        <strong>Nota:</strong> LinkedIn requiere autorización para aplicaciones corporativas
                                    </div>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://www.linkedin.com/developers/" target="_blank">LinkedIn Developers</a></li>
                                        <li>Crea una nueva aplicación</li>
                                        <li>Copia el <strong>Client ID</strong> y <strong>Client Secret</strong></li>
                                        <li>Configura las URLs de redirección</li>
                                        <li>Solicita acceso a la Marketing Developer Platform</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Permisos necesarios:</strong>
                                        <ul class="mb-0">
                                            <li>w_member_social</li>
                                            <li>r_liteprofile</li>
                                            <li>w_organization_social</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- Twitter Instructions -->
                                <div class="tab-pane fade" id="v-pills-twitter">
                                    <h6>Twitter API Configuration</h6>
                                    <div class="alert alert-warning">
                                        <strong>Importante:</strong> Twitter API v2 requiere suscripción pagada
                                    </div>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://developer.twitter.com/" target="_blank">Twitter Developer Portal</a></li>
                                        <li>Crea un proyecto y una aplicación</li>
                                        <li>Genera las claves API y tokens</li>
                                        <li>Configura OAuth 2.0</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Claves necesarias:</strong>
                                        <ul class="mb-0">
                                            <li>API Key (Consumer Key)</li>
                                            <li>API Secret (Consumer Secret)</li>
                                            <li>Bearer Token</li>
                                            <li>Access Token y Access Token Secret</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- Instagram Instructions -->
                                <div class="tab-pane fade" id="v-pills-instagram">
                                    <h6>Instagram API Configuration</h6>
                                    <div class="alert alert-info">
                                        <strong>Nota:</strong> Usa Instagram Basic Display API o Instagram Graph API
                                    </div>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://developers.facebook.com/" target="_blank">Facebook Developers</a></li>
                                        <li>Crea una aplicación</li>
                                        <li>Agrega el producto Instagram Basic Display</li>
                                        <li>Configura OAuth redirect URIs</li>
                                        <li>Obtén el App ID y App Secret</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Permisos necesarios:</strong>
                                        <ul class="mb-0">
                                            <li>instagram_basic</li>
                                            <li>pages_show_list</li>
                                            <li>pages_read_engagement</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- Facebook Instructions -->
                                <div class="tab-pane fade" id="v-pills-facebook">
                                    <h6>Facebook API Configuration</h6>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://developers.facebook.com/" target="_blank">Facebook Developers</a></li>
                                        <li>Crea una nueva aplicación</li>
                                        <li>Agrega el producto Facebook Login</li>
                                        <li>Configura las URLs válidas de OAuth</li>
                                        <li>Obtén el App ID y App Secret</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Permisos necesarios:</strong>
                                        <ul class="mb-0">
                                            <li>pages_manage_posts</li>
                                            <li>pages_read_engagement</li>
                                            <li>publish_to_groups</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- YouTube Instructions -->
                                <div class="tab-pane fade" id="v-pills-youtube">
                                    <h6>YouTube API Configuration</h6>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://console.developers.google.com/" target="_blank">Google Cloud Console</a></li>
                                        <li>Crea un nuevo proyecto</li>
                                        <li>Habilita YouTube Data API v3</li>
                                        <li>Crea credenciales OAuth 2.0</li>
                                        <li>Descarga el archivo de credenciales</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Scopes necesarios:</strong>
                                        <ul class="mb-0">
                                            <li>youtube.upload</li>
                                            <li>youtube.readonly</li>
                                            <li>youtube.force-ssl</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- TikTok Instructions -->
                                <div class="tab-pane fade" id="v-pills-tiktok">
                                    <h6>TikTok API Configuration</h6>
                                    <div class="alert alert-warning">
                                        <strong>Beta:</strong> TikTok API está en desarrollo limitado
                                    </div>
                                    <ol class="mb-3">
                                        <li>Ve a <a href="https://developers.tiktok.com/" target="_blank">TikTok Developers</a></li>
                                        <li>Solicita acceso a la API</li>
                                        <li>Crea una aplicación</li>
                                        <li>Configura los endpoints de callback</li>
                                    </ol>
                                    <div class="bg-light p-3 rounded">
                                        <strong>Nota:</strong> El acceso a TikTok API es limitado y requiere aprobación especial.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="openDeveloperConsole()">
                        <i class="fas fa-external-link-alt me-1"></i>Abrir Console de Desarrollador
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modals -->
    
    <!-- Delete Social Account Modal -->
    <div class="modal fade" id="deleteAccountModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirmar Eliminación</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="fas fa-exclamation-triangle text-warning fa-3x"></i>
                    </div>
                    <p class="text-center mb-3">
                        ¿Estás seguro de que quieres eliminar esta cuenta de red social?
                    </p>
                    <div class="alert alert-warning">
                        <strong>Esta acción no se puede deshacer.</strong><br>
                        Se perderá toda la configuración y el historial asociado a esta cuenta.
                    </div>
                    <div id="account-delete-info" class="text-center">
                        <strong>Cuenta:</strong> <span id="account-delete-name"></span><br>
                        <strong>Plataforma:</strong> <span id="account-delete-platform"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirm-delete-account">
                        <i class="fas fa-trash me-1"></i>Eliminar Cuenta
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete AI Provider Modal -->
    <div class="modal fade" id="deleteProviderModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirmar Desconexión</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="fas fa-unlink text-warning fa-3x"></i>
                    </div>
                    <p class="text-center mb-3">
                        ¿Estás seguro de que quieres desconectar este proveedor de IA?
                    </p>
                    <div class="alert alert-warning">
                        <strong>Esta acción eliminará la API key guardada.</strong><br>
                        Deberás volver a configurar las credenciales para usar este proveedor.
                    </div>
                    <div id="provider-delete-info" class="text-center">
                        <strong>Proveedor:</strong> <span id="provider-delete-name"></span><br>
                        <strong>Estado:</strong> <span id="provider-delete-status"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirm-delete-provider">
                        <i class="fas fa-unlink me-1"></i>Desconectar Proveedor
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Safe Utilities (Load First) -->
    <script src="{{ url_for('static', filename='js/safe-utils.js') }}"></script>
    
    <!-- Custom JavaScript -->
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    <script src="{{ url_for('static', filename='js/content-adaptation.js') }}"></script>
    <script src="{{ url_for('static', filename='js/monitoring.js') }}"></script>
    
    <!-- Dashboard entrance transition -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // Start dashboard entrance animation
                setTimeout(() => {
                    if (document.body) {
                        document.body.classList.remove('dashboard-loading');
                        document.body.classList.add('dashboard-loaded');
                    }
                }, 100);

                // Stagger card animations for better visual effect
                const cards = document.querySelectorAll('.dashboard-card');
                if (cards.length > 0) {
                    cards.forEach((card, index) => {
                        if (card) {
                            card.style.opacity = '0';
                            card.style.transform = 'translateY(20px)';
                            card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                            
                            setTimeout(() => {
                                if (card) {
                                    card.style.opacity = '1';
                                    card.style.transform = 'translateY(0)';
                                }
                            }, 200 + (index * 100));
                        }
                    });
                }

                // Add smooth transition for navigation items
                const navItems = document.querySelectorAll('.nav-link');
                if (navItems.length > 0) {
                    navItems.forEach((item, index) => {
                        if (item) {
                            item.style.opacity = '0';
                            item.style.transform = 'translateX(-20px)';
                            item.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                            
                            setTimeout(() => {
                                if (item) {
                                    item.style.opacity = '1';
                                    item.style.transform = 'translateX(0)';
                                }
                            }, 300 + (index * 50));
                        }
                    });
                }
            } catch (error) {
                console.warn('Dashboard transition setup failed:', error);
            }
        });
    </script>
</body>
</html>
